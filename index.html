<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Simulador Examen WordPress CEI - Versi√≥n Estable</title>
    <style>
        body { font-family: 'Segoe UI', Roboto, Helvetica, Arial, sans-serif; background-color: #f1f1f1; margin: 0; padding-bottom: 80px; color: #333; }
        
        /* HEADER FIJO */
        .header { position: fixed; top: 0; left: 0; right: 0; background: #2271b1; color: white; padding: 10px 20px; z-index: 1000; display: flex; justify-content: space-between; align-items: center; box-shadow: 0 2px 5px rgba(0,0,0,0.2); }
        .timer-display { font-size: 1.5rem; font-weight: bold; font-variant-numeric: tabular-nums; }
        .pause-btn { background: #f0ad4e; border: none; padding: 8px 16px; border-radius: 4px; cursor: pointer; font-weight: bold; font-size: 0.9rem; color: #333; }
        .pause-btn:hover { background: #ec971f; }

        /* CONTENEDOR PRINCIPAL */
        .container { max-width: 800px; margin: 80px auto 20px; padding: 0 15px; }
        
        /* TARJETA DE PREGUNTA */
        .question-card { background: white; padding: 20px; border-radius: 8px; box-shadow: 0 2px 4px rgba(0,0,0,0.05); margin-bottom: 20px; border-left: 5px solid #2271b1; }
        .q-text { font-size: 1.1rem; font-weight: 600; margin-bottom: 15px; line-height: 1.4; }
        
        /* OPCIONES */
        .options-group { display: flex; flex-direction: column; gap: 8px; }
        .option-label { display: flex; align-items: center; padding: 10px; border: 1px solid #ddd; border-radius: 6px; cursor: pointer; transition: background 0.2s; }
        .option-label:hover { background-color: #f8f9fa; }
        .option-label input { margin-right: 12px; transform: scale(1.2); }

        /* FEEDBACK VISUAL */
        .correct { background-color: #d4edda !important; border-color: #c3e6cb !important; color: #155724; }
        .wrong { background-color: #f8d7da !important; border-color: #f5c6cb !important; color: #721c24; text-decoration: line-through; }
        .explanation-box { margin-top: 15px; padding: 12px; background: #e2e3e5; border-radius: 6px; font-size: 0.9rem; display: none; border-left: 4px solid #6c757d; }
        
        /* BOTONES DE ACCI√ìN */
        .check-btn { margin-top: 15px; background: #2271b1; color: white; border: none; padding: 10px 20px; border-radius: 4px; cursor: pointer; font-size: 1rem; width: 100%; }
        .check-btn:hover { background: #135e96; }
        .check-btn:disabled { background: #ccc; cursor: not-allowed; }

        /* RESULTADOS Y PAUSA */
        #results-modal, #pause-modal { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.85); z-index: 2000; align-items: center; justify-content: center; flex-direction: column; color: white; text-align: center; }
        .modal-content { background: white; color: #333; padding: 30px; border-radius: 10px; max-width: 400px; width: 90%; }
        .btn-restart { background: #28a745; color: white; padding: 15px; border: none; border-radius: 5px; font-size: 1.1rem; cursor: pointer; margin-top: 15px; width: 100%; }

        /* BARRA PROGRESO */
        .progress-bar { position: fixed; top: 60px; left: 0; height: 5px; background: #ddd; width: 100%; z-index: 999; }
        .progress-fill { height: 100%; background: #00a0d2; width: 0%; transition: width 0.3s; }
    </style>
</head>
<body>

    <div id="pause-modal">
        <h1 style="color:white">EXAMEN PAUSADO</h1>
        <button class="pause-btn" onclick="togglePause()" style="font-size:1.2rem; padding:15px 30px;">REANUDAR</button>
    </div>

    <div id="results-modal">
        <div class="modal-content">
            <h2>Examen Finalizado</h2>
            <p>Tu puntuaci√≥n es:</p>
            <h1 id="final-score" style="font-size: 3rem; margin: 10px 0;">0.0</h1>
            <p id="final-verdict"></p>
            <button class="btn-restart" onclick="location.reload()">GENERAR NUEVO EXAMEN</button>
        </div>
    </div>

    <div class="header">
        <div>WP Examen <span id="q-count" style="font-size:0.8rem; opacity:0.8;">(0/50)</span></div>
        <div style="display:flex; gap:10px; align-items:center;">
            <div class="timer-display" id="timer">45:00</div>
            <button class="pause-btn" onclick="togglePause()">II</button>
        </div>
    </div>
    <div class="progress-bar"><div class="progress-fill" id="progress"></div></div>

    <div class="container" id="quiz-container">
        </div>

    <div style="text-align: center; margin: 20px;">
        <button onclick="finishExam()" style="background:#d63638; color:white; padding:15px 40px; border:none; border-radius:5px; font-size:1.1rem; cursor:pointer;">Terminar Examen Ahora</button>
    </div>

<script>
const DB = [
        // --- BLOQUE 1: ARQUITECTURA, CORE Y ARCHIVOS (Nivel T√©cnico) ---
        { q: "Si necesitas que un Child Theme herede los estilos del padre y no lo hace autom√°ticamente, ¬øqu√© funci√≥n debes usar en functions.php?", o: ["wp_enqueue_scripts", "import_css", "get_stylesheet_directory", "add_theme_support"], a: 0, e: "Debes encolar el estilo del padre usando wp_enqueue_scripts para asegurar la herencia correcta." },
        { q: "¬øQu√© archivo es OBLIGATORIO para que WordPress reconozca un tema nuevo (adem√°s del index.php)?", o: ["functions.php", "style.css", "screenshot.png", "header.php"], a: 1, e: "style.css debe contener la cabecera con el nombre del tema (Theme Name) para que WP lo detecte." },
        { q: "En la Jerarqu√≠a de Plantillas, si no existe 'category.php', ¬øqu√© archivo busca WordPress inmediatamente despu√©s?", o: ["index.php", "archive.php", "page.php", "single.php"], a: 1, e: "El orden es: category-slug.php > category-id.php > category.php > archive.php > index.php." },
        { q: "Si mueves tu WordPress de dominio y no puedes acceder al admin, ¬øqu√© constantes debes definir en wp-config.php para forzar la nueva URL?", o: ["WP_NEWHOME y WP_NEWURL", "WP_HOME y WP_SITEURL", "RELOCATE_URL", "CHANGE_DOMAIN"], a: 1, e: "Estas dos constantes sobrescriben temporalmente los valores de la base de datos." },
        { q: "¬øQu√© ocurre t√©cnicamente cuando activas el 'Modo Depuraci√≥n' (WP_DEBUG) en true?", o: ["Se muestra el log de accesos", "Se muestran los errores, avisos y advertencias de PHP en el front-end", "La web se pone en mantenimiento", "Se borra la cach√©"], a: 1, e: "Vital para desarrolladores. Nunca debe estar activo en una web en producci√≥n." },
        { q: "¬øD√≥nde se almacenan los datos serializados de los Widgets y la configuraci√≥n del tema?", o: ["wp_posts", "wp_options", "wp_termmeta", "wp_users"], a: 1, e: "Por esto es peligroso hacer un 'Buscar y Reemplazar' simple en la base de datos sin herramientas que respeten la serializaci√≥n." },
        { q: "¬øQu√© permiso chmod es el correcto y seguro para el archivo wp-config.php?", o: ["777", "755", "644 o 600", "000"], a: 2, e: "Debe ser lo m√°s restrictivo posible. 777 es una vulnerabilidad cr√≠tica." },
        { q: "¬øQu√© funci√≥n de PHP se utiliza en el header.php para cargar los estilos y scripts de los plugins?", o: ["wp_head()", "get_header()", "wp_footer()", "include_once()"], a: 0, e: "Sin la funci√≥n wp_head(), ning√∫n plugin podr√° inyectar sus CSS/JS y la web se romper√°." },
        { q: "Si aparece el error 'Allowed memory size of X bytes exhausted', ¬ød√≥nde lo solucionas?", o: ["Borrando im√°genes", "Aumentando el memory_limit en wp-config.php o php.ini", "Cambiando de tema", "Reinstalando WP"], a: 1, e: "Es un error com√∫n cuando un plugin pesado consume m√°s RAM de la asignada a PHP." },
        { q: "¬øQu√© es el 'Salt' en wp-config.php?", o: ["Un plugin de seguridad", "Claves de encriptaci√≥n para mejorar la seguridad de las cookies de sesi√≥n", "El prefijo de la base de datos", "Una configuraci√≥n de cach√©"], a: 1, e: "Si sospechas que te han hackeado, cambiar las Salts cierra la sesi√≥n de todos los usuarios." },
        
        // --- BLOQUE 2: ELEMENTOR PRO AVANZADO & CSS ---
        { q: "Si usas CSS Personalizado en Elementor, ¬øqu√© palabra clave selecciona el contenedor actual din√°micamente?", o: ["#this", "selector", ".elementor-item", "self"], a: 1, e: "Permite aplicar estilos solo a ese widget sin tener que asignarle una clase manual." },
        { q: "En Elementor, ¬øqu√© hace la opci√≥n 'Regenerar CSS y Datos'?", o: ["Borra la base de datos", "Limpia la cach√© interna de estilos de Elementor y regenera los archivos CSS", "Resetea el dise√±o", "Actualiza la licencia"], a: 1, e: "Soluci√≥n #1 cuando haces cambios en el dise√±o y no se reflejan en la web." },
        { q: "¬øC√≥mo se crea una plantilla de 'Error 404' personalizada con Elementor Pro?", o: ["Creando una p√°gina normal", "Usando el Theme Builder > Error 404", "Con un plugin externo", "Editando el 404.php"], a: 1, e: "El Theme Builder permite asignar esa plantilla para que se muestre cuando una URL no existe." },
        { q: "¬øQu√© condici√≥n de visualizaci√≥n (Display Condition) usar√≠as para mostrar un Popup solo en entradas de la categor√≠a 'Noticias'?", o: ["Include: Singular > All", "Include: Archives > Noticias", "Include: Singular > Entradas > In Category: Noticias", "Include: Entire Site"], a: 2, e: "Requiere especificar que es un contenido singular (post) que pertenece a una taxonom√≠a concreta." },
        { q: "Si tienes dos secciones con 'Sticky' (Pegajoso) activado y la segunda pasa por debajo de la primera, ¬øqu√© falta?", o: ["Z-Index mayor en la primera", "Z-Index mayor en la segunda", "Margen negativo", "Fondo transparente"], a: 1, e: "El elemento que debe quedar encima necesita un √≠ndice de apilamiento (Z-Index) superior." },
        { q: "¬øQu√© unidad de medida CSS es relativa al tama√±o de la fuente del elemento ra√≠z (html)?", o: ["em", "rem", "px", "%"], a: 1, e: "REM (Root EM) es la mejor pr√°ctica para accesibilidad y dise√±o responsive escalable." },
        { q: "¬øQu√© es el 'Flexbox' en los Contenedores de Elementor?", o: ["Un plugin", "Un modelo de dise√±o CSS unidimensional para distribuir espacio entre √≠tems", "Una caja flexible de imagen", "Un error"], a: 1, e: "Sustituy√≥ al sistema de secciones/columnas antiguo, permitiendo alineaciones complejas." },
        { q: "Si un cambio de fuente (tipograf√≠a) no se aplica en el frontend pero s√≠ en el editor, ¬øqu√© suele ser?", o: ["Error de base de datos", "Problema de CORS o Cach√© del navegador/servidor", "El tema no es compatible", "Falta la licencia"], a: 1, e: "Suele ocurrir cuando las fuentes se cargan desde un dominio distinto o est√°n cacheadas." },
        { q: "¬øPara qu√© sirve el widget 'Shortcode' de Elementor?", o: ["Para escribir c√≥digo PHP", "Para renderizar la salida de un shortcode de otro plugin (ej: Contact Form 7)", "Para poner espacios", "Para seguridad"], a: 1, e: "Es el puente para integrar funcionalidades de plugins externos dentro del dise√±o visual." },
        { q: "¬øQu√© hace la opci√≥n 'Layout > Overflow: Hidden' en un contenedor?", o: ["Oculta el contenedor", "Recorta cualquier contenido que se salga de los bordes del contenedor", "Hace scroll", "Oculta el men√∫"], a: 1, e: "√ötil para evitar el scroll horizontal indeseado cuando una animaci√≥n o imagen se sale del ancho." },

        // --- BLOQUE 3: WOOCOMMERCE EXPERTO ---
        { q: "En WooCommerce, ¬ød√≥nde se guardan los atributos globales de los productos en la base de datos?", o: ["wp_postmeta", "wp_options", "wp_terms, wp_termmeta y wp_term_taxonomy", "wp_woocommerce"], a: 2, e: "Los atributos funcionan t√©cnicamente como taxonom√≠as personalizadas." },
        { q: "Si configuras un producto como 'Descargable', ¬øc√≥mo proteges el archivo para que no se comparta el enlace?", o: ["No se puede", "WooCommerce genera URLs √∫nicas y forzadas por PHP para cada comprador", "Poniendo contrase√±a", "Usando Dropbox"], a: 1, e: "El m√©todo de descarga 'Forzar descarga' (PHP) oculta la ruta real del archivo en el servidor." },
        { q: "¬øQu√© gancho (hook) usar√≠as para a√±adir texto legal justo antes del bot√≥n de 'Realizar pedido'?", o: ["woocommerce_before_checkout_form", "woocommerce_review_order_before_submit", "wp_footer", "woocommerce_after_cart"], a: 1, e: "Permite inyectar contenido cr√≠tico en el √∫ltimo paso del checkout." },
        { q: "Si los correos de WooCommerce no llegan al cliente, ¬øcu√°l es la causa m√°s probable?", o: ["WooCommerce est√° roto", "El servidor no tiene configurado SMTP y los correos van a SPAM", "Falta el asunto", "El cliente miente"], a: 1, e: "PHP Mail (por defecto) tiene mala reputaci√≥n. Se debe usar un plugin SMTP." },
        { q: "¬øQu√© diferencia real hay entre 'Cross-Sell' (Ventas cruzadas) y 'Up-Sell' (Ventas dirigidas)?", o: ["Ninguna", "Up-Sell aparece en la ficha (producto mejor/caro); Cross-Sell en el carrito (complementarios)", "Up-Sell es en el carrito", "Cross-sell es para afiliados"], a: 1, e: "Up-Sell intenta mejorar la compra actual. Cross-Sell intenta a√±adir m√°s cosas al final." },
        { q: "¬øC√≥mo ocultar√≠as el bot√≥n 'A√±adir al carrito' para usar WooCommerce como Cat√°logo?", o: ["Borrando el plugin", "Con un plugin de 'Catalog Mode' o un snippet de c√≥digo en functions.php", "En Ajustes > General", "No se puede"], a: 1, e: "WooCommerce no tiene bot√≥n nativo de 'Modo Cat√°logo', requiere c√≥digo o plugin." },
        { q: "Si borras un pedido en estado 'Completado', ¬øqu√© pasa con los informes de ventas?", o: ["Se mantienen igual", "Se recalculan restando esa venta", "Da error", "Se duplican"], a: 1, e: "WooCommerce es din√°mico; si borras el pedido, las estad√≠sticas financieras cambian." },
        { q: "¬øQu√© es el 'Transient' en WooCommerce?", o: ["Un cliente pasajero", "Datos temporales cacheados en la base de datos (como el contenido del carrito o fragmentos)", "Un m√©todo de env√≠o", "Un error"], a: 1, e: "A veces hay que borrarlos en WooCommerce > Estado > Herramientas si el carrito hace cosas raras." },
        { q: "Para vender entradas de un evento con stock limitado y fecha, ¬øqu√© necesitas?", o: ["Solo WooCommerce", "WooCommerce + Plugin de Bookings/Events o Tickets", "Contact Form 7", "Un CPT"], a: 1, e: "WooCommerce est√°ndar no gestiona bien calendarios ni reservas por horas." },

        // --- BLOQUE 4: WPO, SEGURIDAD & SERVIDOR (Hardcore) ---
        { q: "¬øQu√© regla en .htaccess bloquea el acceso directo a archivos PHP importantes como wp-config.php?", o: ["Deny from all", "Allow from none", "Block access", "Stop execution"], a: 0, e: "Es la directiva de Apache para prohibir cualquier petici√≥n HTTP a ese archivo." },
        { q: "¬øQu√© es el 'Heartbeat' de WordPress y por qu√© puede ralentizar la web?", o: ["Un plugin de salud", "La API que comunica navegador y servidor cada 15s (autoguardado, avisos) consumiendo CPU", "El logo", "El cron"], a: 1, e: "Limitar el Heartbeat con plugins como WP Rocket reduce la carga del servidor." },
        { q: "Si usas im√°genes WebP pero el navegador del usuario es muy antiguo (Safari viejo), ¬øqu√© pasa?", o: ["No ve nada", "Se usa la etiqueta <picture> o un plugin para servir JPG de respaldo (fallback)", "Error 404", "Se ve en blanco y negro"], a: 1, e: "La estrategia de 'fallback' es necesaria para compatibilidad total." },
        { q: "¬øQu√© diferencia hay entre Cach√© de P√°gina y Cach√© de Objeto (Object Cache)?", o: ["Ninguna", "P√°gina guarda HTML est√°tico; Objeto guarda consultas a la base de datos (Redis/Memcached)", "Objeto es para im√°genes", "P√°gina es para el admin"], a: 1, e: "Object Cache es vital para tiendas grandes o webs din√°micas donde el HTML no se puede cachear siempre." },
        { q: "Si tienes un error de 'Mixed Content' tras pasar a HTTPS, ¬øqu√© significa?", o: ["Contenido adulto", "Que la web carga por HTTPS pero algunos recursos (imgs/scripts) cargan por HTTP", "Error de base de datos", "Contenido duplicado"], a: 1, e: "El candado no sale verde. Se arregla con 'Better Search Replace' o plugins SSL." },
        { q: "¬øQu√© es un ataque XSS (Cross-Site Scripting)?", o: ["Robo de contrase√±as", "Inyecci√≥n de scripts maliciosos en el navegador de otros usuarios a trav√©s de la web", "Ataque al servidor", "Fuerza bruta"], a: 1, e: "Ocurre si no se sanean (sanitize) los datos de entrada en formularios o comentarios." },
        { q: "¬øC√≥mo desactivar√≠as la edici√≥n de archivos (Theme Editor) desde el admin por seguridad?", o: ["No se puede", "define('DISALLOW_FILE_EDIT', true); en wp-config.php", "Borrando el usuario", "Usando CSS"], a: 1, e: "Evita que si un hacker entra como admin, pueda inyectar malware en los archivos PHP." },
        { q: "¬øQu√© es el 'WP-Cron'?", o: ["Un reloj", "El sistema de tareas programadas de WP que se ejecuta con cada visita", "Un virus", "Un plugin"], a: 1, e: "Si la web tiene pocas visitas, las tareas programadas (backups, posts) pueden fallar. Se recomienda usar el cron del servidor real." },

        // --- BLOQUE 5: SEO T√âCNICO & DATOS ESTRUCTURADOS ---
        { q: "¬øQu√© etiqueta meta es cr√≠tica para que el dise√±o responsive funcione en m√≥viles?", o: ["meta charset", "meta viewport", "meta description", "meta robots"], a: 1, e: "Sin <meta name='viewport' ...>, los m√≥viles renderizan la web como si fuera de escritorio (zoom out)." },
        { q: "Si usas Yoast SEO, ¬øqu√© hace la opci√≥n 'Canonical URL'?", o: ["Redirige al usuario", "Indica a Google cu√°l es la versi√≥n original de un contenido duplicado", "Borra la p√°gina", "Mejora la velocidad"], a: 1, e: "Evita penalizaciones por contenido duplicado si un post es accesible por varias URLs." },
        { q: "¬øQu√© es el archivo 'sitemap_index.xml'?", o: ["Un mapa visual", "El √≠ndice que agrupa los sub-sitemaps (post, page, category) para enviarlos a Search Console", "El robots.txt", "La home"], a: 1, e: "Yoast/RankMath generan √≠ndices para no saturar un solo archivo XML." },
        { q: "Si una p√°gina tiene la etiqueta 'noindex, follow', ¬øqu√© hace el bot?", o: ["Nada", "No la indexa (no sale en resultados) pero S√ç sigue los enlaces que contiene", "La indexa pero no sigue enlaces", "La borra"], a: 1, e: "√ötil para p√°ginas de listados o etiquetas que no quieres posicionar pero quieres que se rastreen." },
        { q: "¬øQu√© son los Datos Estructurados (Schema.org)?", o: ["Una base de datos", "C√≥digo JSON-LD que ayuda a Google a entender el contenido (Receta, Producto, Evento)", "CSS avanzado", "Plugins"], a: 1, e: "Permiten los 'Rich Snippets' (estrellitas, precios) en los resultados de b√∫squeda." },
        
        // --- BLOQUE 6: RESOLUCI√ìN DE PROBLEMAS (TROUBLESHOOTING) ---
        { q: "Si al subir una imagen recibes 'Error HTTP', ¬øcu√°l NO suele ser una causa?", o: ["Falta de memoria PHP", "Nombre de archivo con caracteres raros (√±, tildes)", "Versi√≥n de PHP muy antigua", "El color de la imagen"], a: 3, e: "El color no influye. La memoria, los nombres de archivo o las librer√≠as GD/Imagick s√≠." },
        { q: "Si tras migrar la web, los enlaces internos dan error 404, ¬øqu√© paso olvidaste?", o: ["Guardar Enlaces Permanentes (flush rewrite rules)", "Subir las fotos", "Cambiar el tema", "Borrar cach√©"], a: 0, e: "Es necesario para regenerar el .htaccess con la nueva estructura." },
        { q: "Si la web carga pero se ve 'descolocada' (sin CSS) y en la consola ves errores 403, ¬øqu√© pasa?", o: ["El CSS est√° borrado", "Permisos de archivos incorrectos o plugin de seguridad bloqueando acceso a la carpeta de estilos", "Error de base de datos", "Falta el tema"], a: 1, e: "El servidor est√° prohibiendo la lectura de los archivos .css." },
        { q: "¬øQu√© significa un error 503 Service Unavailable?", o: ["P√°gina no encontrada", "El servidor est√° saturado o en mantenimiento temporal", "Permiso denegado", "Redirecci√≥n"], a: 1, e: "Com√∫n cuando se agotan los recursos de la CPU/RAM del hosting." },
        { q: "Si no puedes acceder a wp-admin por un bucle de redirecciones, ¬øqu√© archivo probablemente est√° corrupto?", o: ["wp-config.php", ".htaccess", "index.php", "footer.php"], a: 1, e: "Un error en las reglas de reescritura provoca loops infinitos." },
        
        // --- BLOQUE 7: POOL GENERAL DE REFUERZO (Variedad T√©cnica) ---
        { q: "¬øQu√© es un 'Hook' (Gancho) en WordPress?", o: ["Un error", "Un punto en el c√≥digo donde puedes 'enganchar' tu propia funci√≥n (Action o Filter) sin tocar el core", "Un plugin pirata", "Una herramienta de dise√±o"], a: 1, e: "La base de la extensibilidad de WP. Actions hacen cosas, Filters modifican datos." },
        { q: "¬øPara qu√© sirve la funci√≥n 'the_content()'?", o: ["Muestra el t√≠tulo", "Muestra el cuerpo/contenido del post actual en el loop", "Muestra la fecha", "Muestra el autor"], a: 1, e: "Funci√≥n esencial en cualquier archivo de plantilla single.php o page.php." },
        { q: "¬øQu√© diferencia hay entre 'site_url()' y 'home_url()'?", o: ["Ninguna", "site_url es donde est√°n los archivos de WP; home_url es la direcci√≥n que visita el usuario", "home_url es para el admin", "site_url es para im√°genes"], a: 1, e: "Pueden ser diferentes si instalas WP en un subdirectorio pero lo sirves en la ra√≠z." },
        { q: "¬øQu√© es un 'Taxonomy' en WordPress?", o: ["Un impuesto", "Un sistema de clasificaci√≥n de contenidos (Categor√≠as, Etiquetas y personalizadas)", "Un usuario", "Un tipo de post"], a: 1, e: "Mecanismo para agrupar posts." },
        { q: "¬øQu√© archivo maneja la p√°gina de resultados de b√∫squeda?", o: ["search.php", "find.php", "results.php", "query.php"], a: 0, e: "Si no existe, WP usar√° index.php." },
        { q: "¬øEs posible tener m√∫ltiples H1 en una p√°gina?", o: ["No, explota", "HTML5 lo permite, pero por SEO se recomienda tener solo uno principal", "S√≠, cuantos m√°s mejor", "Google penaliza si hay cero"], a: 1, e: "La buena pr√°ctica SEO sigue siendo un √∫nico H1 descriptivo." },
        { q: "¬øQu√© significa que un tema sea 'Translation Ready'?", o: ["Que est√° en espa√±ol", "Que el c√≥digo usa funciones gettext (ej: __('Text', 'domain')) y est√° preparado para ser traducido", "Que tiene Google Translate", "Nada"], a: 1, e: "Permite generar archivos .pot para traducir con Loco Translate." },
        { q: "¬øQu√© es un 'Must-Use Plugin' (mu-plugin)?", o: ["Un plugin recomendado", "Un plugin instalado en /wp-content/mu-plugins que se ejecuta autom√°ticamente y no se puede desactivar desde el admin", "Un plugin de pago", "Un plugin de m√∫sica"], a: 1, e: "Usado por hostings o desarrolladores para forzar funcionalidades cr√≠ticas." },
        
        // --- BLOQUE 8: REPASO DE CONSTRUCCI√ìN VISUAL ---
        { q: "¬øQu√© diferencia hay entre 'px', 'em', 'rem', 'vw' y 'vh'?", o: ["Son lo mismo", "Son unidades absolutas (px) y relativas (em/rem al texto, vw/vh a la pantalla)", "Son colores", "Son formatos de imagen"], a: 1, e: "Dominar esto es clave para el Responsive Design real." },
        { q: "En Elementor, ¬øqu√© es el 'Navigator'?", o: ["El navegador web", "Un panel de capas tipo Photoshop para ver la estructura HTML", "El mapa", "La ayuda"], a: 1, e: "Indispensable para seleccionar elementos ocultos o superpuestos." },
        { q: "¬øQu√© es el 'Theme Style' (Estilos del Tema) en Elementor?", o: ["Un widget", "Configuraci√≥n global que sobrescribe el CSS del tema (tipograf√≠a, botones, fondos) sin c√≥digo", "Un plugin", "Un error"], a: 1, e: "Permite controlar la identidad visual globalmente." },
        { q: "¬øQu√© ocurre si desactivas Elementor Pro pero dejas Elementor Free?", o: ["Todo funciona igual", "Pierdes las funciones Pro (Header, Footer, Formuarios, CSS Custom), pero el contenido b√°sico se mantiene", "Se borra la web", "Error 500"], a: 1, e: "Los widgets Pro desaparecen o dejan de renderizarse correctamente." },
        
        // --- BLOQUE 9: PREGUNTAS TRAMPA (Contexto del Curso) ---
        { q: "¬øSe puede usar un Custom Post Type sin plugin?", o: ["No, es imposible", "S√≠, escribiendo el c√≥digo (register_post_type) en functions.php", "Solo pagando", "Solo en temas Pro"], a: 1, e: "Los plugins como CPT UI o JetEngine solo son una interfaz visual para generar ese c√≥digo PHP." },
        { q: "¬øQu√© pasa si borras la categor√≠a 'Sin categor√≠a' (Uncategorized)?", o: ["Se rompe la web", "No se puede borrar, es la categor√≠a por defecto", "Desaparecen los posts", "Nada"], a: 1, e: "Puedes renombrarla, pero WP exige que siempre exista al menos una categor√≠a base." },
        { q: "¬øQu√© es el 'Loop Grid' de Elementor?", o: ["Un widget para mostrar listados de posts con un dise√±o de tarjeta totalmente personalizado", "Una galer√≠a", "Un men√∫", "Un formulario"], a: 1, e: "La evoluci√≥n moderna de la visualizaci√≥n de archivos." },
        { q: "¬øQu√© hace la funci√≥n 'WordPress Importer'?", o: ["Importa demos", "Importa contenido XML (Posts, P√°ginas, Comentarios, Medios) de otro WP", "Importa usuarios", "Importa bases de datos SQL"], a: 1, e: "Herramienta nativa en Herramientas > Importar." },
        
        // --- BLOQUE 10: SEGURIDAD DE ARCHIVOS ---
        { q: "¬øQu√© archivo evita que Google indexe una carpeta concreta del servidor?", o: [".htaccess", "robots.txt", "index.php", "config.php"], a: 1, e: "Disallow: /carpeta/ en robots.txt." },
        { q: "¬øPor qu√© se recomienda desactivar XML-RPC si no se usa?", o: ["Por velocidad", "Es un vector com√∫n de ataques de fuerza bruta y DDoS", "Por SEO", "Por dise√±o"], a: 1, e: "Es una API antigua que permite m√∫ltiples intentos de contrase√±a en una sola petici√≥n." },
        { q: "¬øQu√© es un 'Nonce' en WordPress?", o: ["Un insulto", "Number used ONCE: token de seguridad para proteger URLs y formularios contra ataques CSRF", "Un usuario", "Un plugin"], a: 1, e: "Garantiza que la acci√≥n la realiza el usuario que dice ser y desde donde debe ser." },
        
        // --- PREGUNTAS CLAVE DE RAFA ARJONILLA (Refuerzo) ---
        { q: "Seg√∫n Rafa, ¬øcu√°l es la mejor forma de captar clientes en fr√≠o?", o: ["Llamando por tel√©fono", "Auditor√≠as en v√≠deo (Loom) detectando errores en sus webs", "Spam por email", "Repartir flyers"], a: 1, e: "Estrategia mencionada en la √∫ltima sesi√≥n para freelance." },
        { q: "¬øQu√© es 'Live Link' en LocalWP?", o: ["Un enlace permanente", "Un t√∫nel temporal (ngrok) para ense√±ar la web local a un cliente remoto", "Un error", "Un plugin"], a: 1, e: "Permite mostrar avances sin subir a hosting real." },
        { q: "¬øQu√© plugin recomienda el curso para crear copias de seguridad portables?", o: ["Duplicator", "All-in-One WP Migration", "BackupBuddy", "Updraft"], a: 1, e: "Est√°ndar del curso para entregas." },
        { q: "¬øQu√© ajuste es crucial cambiar en 'Ajustes de Lectura' antes de lanzar la web?", o: ["N√∫mero de posts", "Desmarcar 'Disuadir a los motores de b√∫squeda'", "El correo", "La zona horaria"], a: 1, e: "El error #1 de los novatos: lanzar la web y dejarla bloqueada a Google." },
        { q: "¬øQu√© es el 'System Status' de WooCommerce?", o: ["Un informe t√©cnico vital para detectar problemas de memoria, versiones o plugins", "Una factura", "El estado del pedido", "Un tema"], a: 1, e: "Lo primero que se revisa si la tienda falla." },
        { q: "Si vendes productos a Canarias desde pen√≠nsula, ¬øqu√© configuraci√≥n necesitas?", o: ["Nada", "Una Zona de Env√≠o espec√≠fica para Canarias con exenci√≥n de impuestos si aplica", "Otro WooCommerce", "Un plugin de idiomas"], a: 1, e: "WooCommerce permite geolocalizar y cambiar reglas fiscales/env√≠o." },
        
        // --- RELLENO FINAL HASTA ~120 CALIDAD ---
        { q: "¬øQu√© es la 'REST API' de WordPress?", o: ["Un plugin", "Interfaz que permite a aplicaciones externas (Apps m√≥viles, JS) interactuar con los datos de WP (JSON)", "Un tema", "Un error"], a: 1, e: "Convierte a WP en un framework de aplicaciones (Headless WP)." },
        { q: "¬øQu√© significa que una imagen sea 'Retina Ready'?", o: ["Que tiene el doble de densidad de p√≠xeles para verse n√≠tida en pantallas modernas", "Que es peque√±a", "Que es azul", "Que es vectorial"], a: 1, e: "Requiere subir im√°genes al doble de tama√±o o usar SVGs." },
        { q: "¬øQu√© es el 'Maintenance Mode' de Elementor?", o: ["Modo seguro", "Herramienta nativa para mostrar una p√°gina de 'Pr√≥ximamente' o 'Mantenimiento' y devolver c√≥digo 503", "Un error", "Un widget"], a: 1, e: "Evita instalar plugins extra de mantenimiento." },
        { q: "¬øQu√© es un 'ID' de CSS?", o: ["Un identificador √∫nico por p√°gina (#header)", "Una clase (.header)", "Una etiqueta", "Un estilo"], a: 0, e: "A diferencia de las clases, el ID solo debe usarse una vez por documento." },
        { q: "¬øQu√© diferencia hay entre 'Visibility: Hidden' y 'Display: None' en CSS?", o: ["Ninguna", "Hidden oculta pero ocupa espacio; None elimina el elemento del flujo (no ocupa espacio)", "None es mejor", "Hidden es para m√≥viles"], a: 1, e: "Concepto clave de maquetaci√≥n." },
        { q: "¬øQu√© es el archivo 'functions.php'?", o: ["Un archivo de configuraci√≥n", "El cerebro del tema: act√∫a como un plugin para a√±adir funcionalidades PHP", "La base de datos", "El estilo"], a: 1, e: "Se carga autom√°ticamente con el tema." },
        { q: "¬øQu√© es un 'Child Theme'?", o: ["Una copia exacta", "Un tema que hereda del padre y permite sobreescribir archivos sin perder cambios al actualizar", "Un tema peque√±o", "Un plugin"], a: 1, e: "Obligatorio para desarrollos profesionales." },
        { q: "¬øQu√© es 'Localhost'?", o: ["El servidor local (tu ordenador, IP 127.0.0.1)", "Internet", "Un hosting", "Un dominio"], a: 0, e: "Donde trabaja LocalWP." },
        { q: "¬øQu√© es una 'Query' (Consulta)?", o: ["Una pregunta a la base de datos para traer posts", "Un dise√±o", "Un plugin", "Un error"], a: 0, e: "El Loop se basa en una WP_Query." },
        { q: "¬øQu√© es 'Debug'?", o: ["Depurar errores", "Dise√±ar", "Instalar", "Borrar"], a: 0, e: "Proceso de b√∫squeda y soluci√≥n de fallos." },
        { q: "¬øQu√© es 'FTP'?", o: ["File Transfer Protocol (acceso a archivos del servidor)", "Un plugin", "Un tema", "Un dominio"], a: 0, e: "Acceso directo a las carpetas si WP falla." },
        { q: "¬øQu√© es 'SFTP'?", o: ["FTP Seguro", "FTP S√∫per", "FTP Simple", "Nada"], a: 0, e: "Versi√≥n encriptada del protocolo." },
        { q: "¬øQu√© es 'cPanel'?", o: ["Panel de control del hosting", "Panel de WP", "Panel de Elementor", "Un plugin"], a: 0, e: "Interfaz com√∫n para gestionar el servidor." },
        { q: "¬øQu√© es 'phpMyAdmin'?", o: ["Gestor visual de bases de datos MySQL", "Un plugin", "Un tema", "Un editor"], a: 0, e: "Herramienta para tocar la BD directamente." },
        { q: "¬øQu√© es 'Gzip/Brotli'?", o: ["Compresi√≥n de archivos en el servidor para env√≠o m√°s r√°pido", "Un plugin", "Una imagen", "Un error"], a: 0, e: "Mejora la velocidad de transferencia." },
        { q: "¬øQu√© es 'CDN'?", o: ["Content Delivery Network (Red de servidores para servir contenido desde el punto m√°s cercano al usuario)", "Un canal de TV", "Un plugin", "Un dominio"], a: 0, e: "Cloudflare es el m√°s famoso." }
    ];

    // VARIABLES DE ESTADO
    let questions = []; // Las 50 seleccionadas
    let userAnswers = {};
    let timer;
    let timeLeft = 45 * 60; // 45 min
    let isPaused = false;

    // INICIALIZACI√ìN
    function init() {
        // 1. Barajar y coger 50
        questions = DB.sort(() => 0.5 - Math.random()).slice(0, 50);
        
        // 2. Renderizar
        const container = document.getElementById('quiz-container');
        container.innerHTML = ""; // Limpiar
        
        questions.forEach((q, index) => {
            // Crear HTML de la pregunta
            let html = `
                <div class="question-card" id="card-${index}">
                    <div class="q-text">${index + 1}. ${q.q}</div>
                    <div class="options-group">
            `;
            
            // Barajar opciones visualmente pero manteniendo √≠ndice correcto
            // Truco: Mapeamos indices originales
            let indices = q.o.map((_, i) => i); // [0, 1, 2, 3]
            // Si quieres barajar opciones descomenta la siguiente l√≠nea:
            // indices.sort(() => 0.5 - Math.random());

            indices.forEach(i => {
                html += `
                    <label class="option-label" id="lbl-${index}-${i}">
                        <input type="radio" name="q_${index}" value="${i}">
                        ${q.o[i]}
                    </label>
                `;
            });

            html += `
                    </div>
                    <button class="check-btn" onclick="check(${index})">Comprobar</button>
                    <div class="explanation-box" id="exp-${index}"></div>
                </div>
            `;
            container.innerHTML += html;
        });

        // 3. Iniciar Timer
        startTimer();
    }

// --- L√ìGICA DE CORRECCI√ìN H√çBRIDA (PEGAR ESTO EN EL SCRIPT) ---

    // 1. Funci√≥n para comprobar UNA pregunta individual (Bot√≥n azul)
    window.check = function(index) {
        const selected = document.querySelector(`input[name="q_${index}"]:checked`);
        if (!selected) return alert("Por favor, selecciona una opci√≥n antes de comprobar.");

        const val = parseInt(selected.value);
        const correct = questions[index].a;
        
        // Elementos visuales
        const card = document.getElementById(`card-${index}`);
        const btn = card.querySelector('.check-btn');
        const expBox = document.getElementById(`exp-${index}`);
        
        // Guardar la respuesta en el sistema
        userAnswers[index] = (val === correct);

        // Bloquear para que no se pueda cambiar
        const inputs = card.querySelectorAll('input');
        inputs.forEach(inp => inp.disabled = true);
        btn.disabled = true;
        btn.textContent = "Revisado";
        btn.style.background = "#a7aaad"; // Gris visual

        // Mostrar Feedback (Verde/Rojo + Explicaci√≥n)
        if (val === correct) {
            document.getElementById(`lbl-${index}-${val}`).classList.add('correct'); // Verde
            expBox.innerHTML = `<strong>‚úÖ ¬°CORRECTO!</strong><br>${questions[index].e}`;
            expBox.style.borderLeftColor = "#00a32a";
        } else {
            document.getElementById(`lbl-${index}-${val}`).classList.add('wrong'); // Rojo tachado
            document.getElementById(`lbl-${index}-${correct}`).classList.add('correct'); // Verde a la correcta
            expBox.innerHTML = `<strong>‚ùå INCORRECTO.</strong><br>La correcta es la marcada en verde.<br><em>${questions[index].e}</em>`;
            expBox.style.borderLeftColor = "#d63638";
        }
        expBox.style.display = "block";
    };

    // 2. Funci√≥n FINAL (Bot√≥n rojo flotante) - CORRIGE TODO LO PENDIENTE
    window.finishExam = function() {
        clearInterval(timer); // Parar el tiempo

        // Recorremos las 50 preguntas para ver qu√© pas√≥ con cada una
        questions.forEach((q, index) => {
            
            // Caso A: El usuario ya le dio a "Comprobar" antes (Ya est√° guardado)
            if (userAnswers.hasOwnProperty(index)) {
                return; // Pasamos a la siguiente, esta ya cuenta
            }

            // Caso B: El usuario marc√≥ una opci√≥n pero NO le dio a "Comprobar"
            const selected = document.querySelector(`input[name="q_${index}"]:checked`);
            
            if (selected) {
                const val = parseInt(selected.value);
                // La corregimos ahora mismo autom√°ticamente
                userAnswers[index] = (val === q.a);
                
                // Feedback visual silencioso (para que al revisar vea en qu√© fall√≥)
                if (val !== q.a) {
                    document.getElementById(`lbl-${index}-${val}`).classList.add('wrong');
                }
                document.getElementById(`lbl-${index}-${q.a}`).classList.add('correct');
                
            } else {
                // Caso C: Se la dej√≥ en blanco totalmente
                userAnswers[index] = false; // Cuenta como fallo
                // Marcamos cu√°l era la correcta para que aprenda
                document.getElementById(`lbl-${index}-${q.a}`).classList.add('correct');
            }
            
            // Bloqueamos visualmente todo para que parezca examen terminado
            const card = document.getElementById(`card-${index}`);
            const inputs = card.querySelectorAll('input');
            const btn = card.querySelector('.check-btn');
            inputs.forEach(inp => inp.disabled = true);
            if(btn) btn.disabled = true;
        });

        // --- C√ÅLCULO DE LA NOTA ---
        // Contamos cu√°ntos 'true' hay en las respuestas
        const totalAciertos = Object.values(userAnswers).filter(respuesta => respuesta === true).length;
        const totalPreguntas = questions.length; // 50
        const notaFinal = (totalAciertos / totalPreguntas) * 10;

        // Mostrar resultados en el Modal
        document.getElementById('score-display').innerText = notaFinal.toFixed(1); // Ej: 7.5
        document.getElementById('res-correct').innerText = totalAciertos;
        document.getElementById('res-wrong').innerText = totalPreguntas - totalAciertos;
        
        const msg = document.getElementById('score-msg');
        if (notaFinal >= 5) {
            msg.innerHTML = "<strong style='color:#00a32a'>¬°ENHORABUENA, HAS APROBADO! üéâ</strong>";
        } else {
            msg.innerHTML = "<strong style='color:#d63638'>HAS SUSPENDIDO. NECESITAS REPASAR. üìö</strong>";
        }

        document.getElementById('result-modal').style.display = 'flex';
    };

    // TIMER
    function startTimer() {
        timer = setInterval(() => {
            if(!isPaused) {
                timeLeft--;
                let m = Math.floor(timeLeft / 60);
                let s = timeLeft % 60;
                document.getElementById('timer').innerText = `${m}:${s < 10 ? '0'+s : s}`;
                
                if(timeLeft <= 0) finishExam();
            }
        }, 1000);
    }

    window.togglePause = function() {
        isPaused = !isPaused;
        document.getElementById('pause-modal').style.display = isPaused ? 'flex' : 'none';
    };

    function updateProgress() {
        const total = 50;
        const current = Object.keys(userAnswers).length;
        document.getElementById('q-count').innerText = `(${current}/${total})`;
        document.getElementById('progress').style.width = `${(current/total)*100}%`;
    }

    window.finishExam = function() {
        clearInterval(timer);
        const score = Object.values(userAnswers).filter(v => v === true).length;
        const note = (score / 50) * 10;
        
        document.getElementById('final-score').innerText = note.toFixed(1);
        const verdict = document.getElementById('final-verdict');
        
        if(note >= 5) {
            verdict.innerHTML = "<strong style='color:green'>¬°APROBADO!</strong><br>Buen trabajo.";
        } else {
            verdict.innerHTML = "<strong style='color:red'>SUSPENSO</strong><br>Repasa el temario.";
        }
        
        document.getElementById('results-modal').style.display = 'flex';
    };

    // ARRANCAR
    init();

</script>
</body>
</html>