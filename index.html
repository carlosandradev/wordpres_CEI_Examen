<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>10.0</title>
    <style>
        :root { --primary: #2271b1; --success: #28a745; --error: #dc3545; --bg: #f0f0f1; }
        body { font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif; background-color: var(--bg); color: #3c434a; margin: 0; padding-bottom: 100px; }
        
        .header { position: fixed; top: 0; left: 0; right: 0; background: #fff; border-bottom: 1px solid #c3c4c7; padding: 15px 20px; z-index: 1000; display: flex; justify-content: space-between; align-items: center; box-shadow: 0 1px 3px rgba(0,0,0,0.05); }
        .logo { font-weight: 800; color: var(--primary); font-size: 1.2rem; }
        .timer-box { font-variant-numeric: tabular-nums; font-size: 1.4rem; font-weight: 700; color: #1d2327; background: #f0f0f1; padding: 5px 15px; border-radius: 4px; }
        
        .container { max-width: 800px; margin: 90px auto 20px; padding: 0 20px; }

        .card { background: #fff; border: 1px solid #c3c4c7; padding: 25px; margin-bottom: 25px; border-radius: 8px; box-shadow: 0 2px 4px rgba(0,0,0,0.02); }
        .q-text { font-size: 1.1rem; font-weight: 600; margin-bottom: 20px; color: #1d2327; line-height: 1.5; }
        
        .option-label { display: flex; align-items: flex-start; gap: 12px; padding: 12px; border: 2px solid #f0f0f1; border-radius: 6px; cursor: pointer; transition: all 0.2s; margin-bottom: 10px; font-size: 0.95rem; }
        .option-label:hover { background: #f6f7f7; border-color: var(--primary); }
        .option-label input { margin-top: 3px; transform: scale(1.3); cursor: pointer; flex-shrink: 0; accent-color: var(--primary); }
        
        .fab-finish { position: fixed; bottom: 30px; left: 50%; transform: translateX(-50%); background: #d63638; color: white; padding: 15px 40px; border-radius: 50px; border: none; font-size: 1.2rem; font-weight: bold; cursor: pointer; box-shadow: 0 4px 15px rgba(214, 54, 56, 0.4); z-index: 999; transition: transform 0.2s; white-space: nowrap; }
        .fab-finish:hover { transform: translateX(-50%) scale(1.05); background: #b32d2e; }

        /* MODAL RESULTADOS */
        .modal { display: none; position: fixed; inset: 0; background: rgba(0,0,0,0.9); z-index: 2000; justify-content: center; align-items: center; }
        .modal-content { background: white; width: 90%; max-width: 800px; max-height: 90vh; border-radius: 12px; display: flex; flex-direction: column; overflow: hidden; position: relative; }
        
        .modal-header { padding: 20px; background: #f9f9f9; border-bottom: 1px solid #eee; text-align: center; }
        .score-big { font-size: 2.5rem; font-weight: 800; margin: 10px 0; color: var(--primary); }
        .verdict { font-size: 1.5rem; font-weight: 700; text-transform: uppercase; margin-bottom: 10px; }
        
        .modal-body { padding: 20px; overflow-y: auto; flex-grow: 1; text-align: left; background: #f0f0f1; }
        
        .btn-restart { background: var(--primary); color: white; border: none; padding: 15px; font-size: 1.1rem; cursor: pointer; width: 100%; font-weight: bold; }
        .btn-restart:hover { background: #135e96; }

        /* REVISI√ìN DETALLADA */
        .review-item { background: white; padding: 15px; margin-bottom: 15px; border-radius: 8px; border-left: 5px solid #ccc; font-size: 0.95rem; }
        .review-item.r-correct { border-left-color: var(--success); background: #f4fff7; }
        .review-item.r-wrong { border-left-color: var(--error); background: #fff5f5; }
        
        .r-question { font-weight: bold; margin-bottom: 10px; display: block; color: #333; }
        .r-user-ans { display: block; margin-bottom: 5px; }
        .r-correct-ans { display: block; margin-bottom: 5px; color: var(--success); font-weight: 600; }
        .r-explanation { display: block; margin-top: 10px; font-style: italic; color: #666; font-size: 0.9rem; border-top: 1px solid rgba(0,0,0,0.05); padding-top: 5px; }

        .tag-correct { color: var(--success); font-weight: bold; }
        .tag-wrong { color: var(--error); font-weight: bold; text-decoration: line-through; }

        .progress-container { position: fixed; top: 69px; left: 0; width: 100%; height: 4px; background: #e0e0e0; z-index: 998; }
        .progress-bar { height: 100%; background: var(--primary); width: 0%; transition: width 0.3s; }

        .explanation-box { display: none; margin-top: 15px; padding: 12px; background: #f9f9f9; border-left: 4px solid #ccc; border-radius: 4px; font-size: 0.9rem; color: #555; }
        .correct-card .explanation-box { border-left-color: var(--success); background: #f4fff7; }
        .wrong-card .explanation-box { border-left-color: var(--error); background: #fff5f5; }
        .correct-answer { background: #d4edda !important; border-color: var(--success) !important; }
        .user-wrong { background: #f8d7da !important; border-color: var(--error) !important; }
        .options-group { display: flex; flex-direction: column; }
    </style>
</head>
<body>

    <div id="result-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 style="margin:0;">RESULTADO</h2>
                <div id="score-display" class="score-big">0 / 50</div>
                <div id="verdict-text" class="verdict">...</div>
                <div style="font-size:0.9rem; color:#666;">
                    ‚úÖ <span id="res-correct">0</span> | 
                    ‚ùå <span id="res-wrong">0</span>
                </div>
            </div>
            <div class="modal-body" id="detailed-review"></div>
            <button class="btn-restart" onclick="location.reload()">REPETIR EXAMEN</button>
        </div>
    </div>

    <header class="header">
        <div class="logo">EXAMEN WP AVANZADO</div>
        <div class="timer-box" id="timer">45:00</div>
    </header>
    <div class="progress-container"><div class="progress-bar" id="progress"></div></div>

    <div class="container" id="quiz-container"></div>

    <button class="fab-finish" onclick="finishExam()">FINALIZAR Y CALIFICAR</button>

<script>
const DB = [
        // --- BLOQUE 1: AJUSTES Y CONFIGURACI√ìN (Trampas de Men√∫) ---
        { q: "Si tu p√°gina de inicio muestra las √∫ltimas entradas del blog en lugar de tu dise√±o, ¬ød√≥nde lo corriges exactamente?", o: ["En Apariencia > Personalizar > Ajustes de portada", "En Ajustes > Lectura > Tu p√°gina de inicio muestra", "En Ajustes > Generales > P√°gina principal", "En P√°ginas > Todas las p√°ginas > Marcar como Home"], a: 1, e: "La opci√≥n oficial est√° en Ajustes de Lectura, donde defines la p√°gina est√°tica." },
        { q: "Si quieres cambiar el correo electr√≥nico donde llegan los avisos de 'Nuevo usuario' o 'Cambio de contrase√±a' de WordPress, ¬ød√≥nde vas?", o: ["Ajustes > Generales > Direcci√≥n de correo de administraci√≥n", "Usuarios > Perfil > Correo electr√≥nico", "Ajustes > Escritura > Correo por defecto", "Herramientas > Salud del sitio"], a: 0, e: "El correo de administraci√≥n general es el que recibe las notificaciones del sistema." },
        { q: "¬øCu√°l es la estructura de Enlaces Permanentes (Permalinks) que DEBES elegir para evitar problemas con la tienda y mejorar el SEO?", o: ["Simple (midominio.com/?p=123)", "D√≠a y nombre (midominio.com/2023/10/post)", "Nombre de la entrada (midominio.com/nombre-post)", "Num√©rico (midominio.com/archivos/123)"], a: 2, e: "Es la √∫nica que genera URLs limpias sem√°nticamente y es compatible con la mayor√≠a de plugins." },
        { q: "Si desactivas (no borras) un plugin en WordPress, ¬øqu√© ocurre con sus datos y configuraciones?", o: ["Se borran inmediatamente por seguridad", "Se mantienen en la base de datos esperando a que lo reactives", "Se exportan a un archivo .xml", "Wordpress te pregunta si quieres guardarlos"], a: 1, e: "Desactivar solo 'apaga' el c√≥digo. La basura suele quedarse en la base de datos salvo que lo borres y el plugin tenga limpieza." },
        { q: "¬øD√≥nde se gestiona la visibilidad de la web para los motores de b√∫squeda (la casilla 'Disuadir a los motores de b√∫squeda')?", o: ["En Ajustes > Privacidad", "En Ajustes > Lectura", "En Herramientas > SEO", "En Ajustes > Escritura"], a: 1, e: "Es la casilla cr√≠tica que debes desmarcar al terminar la web." },
        { q: "Si borras una P√°gina (Page) en WordPress, ¬ødesaparece del men√∫ de navegaci√≥n autom√°ticamente?", o: ["S√≠, el men√∫ se actualiza solo", "No, el √≠tem se queda en el men√∫ marcado como 'No v√°lido' (Rojo)", "S√≠, pero solo si usas Elementor", "Depende del tema que uses"], a: 1, e: "Los men√∫s son independientes. Si borras la p√°gina, el enlace en el men√∫ se rompe pero sigue ah√≠ visualmente." },
        { q: "¬øQu√© diferencia hay entre el rol 'Autor' y el rol 'Colaborador'?", o: ["El Autor puede publicar sus posts; el Colaborador solo escribir y esperar aprobaci√≥n", "El Autor puede subir fotos; el Colaborador no", "Son lo mismo, solo cambia el nombre", "El Colaborador puede editar posts de otros"], a: 0, e: "La clave es la capacidad de PUBLICAR. El colaborador no tiene el bot√≥n de publicar activo." },
        { q: "Si cambias de Tema (Theme), ¬øqu√© pierdes seguro?", o: ["Las entradas del blog y las p√°ginas", "Las im√°genes de la biblioteca", "Los Widgets y men√∫s asignados a ubicaciones espec√≠ficas", "Los usuarios registrados"], a: 2, e: "El contenido (posts/fotos) es de la base de datos. Los Widgets dependen de las √°reas del tema (sidebars)." },
        { q: "¬øQu√© pasa si pones una P√°gina como 'Privada'?", o: ["Solo la ves t√∫ (Administrador) y los Editores cuando inici√°is sesi√≥n", "Se le pone una contrase√±a autom√°ticamente", "Nadie puede verla, ni siquiera t√∫", "Solo es visible si tienes el enlace directo"], a: 0, e: "Privada requiere login con permisos. 'Protegida con contrase√±a' es la que pide clave a cualquiera." },
        { q: "¬øD√≥nde cambias el Favicon (el icono de la pesta√±a del navegador)?", o: ["En Ajustes > Generales", "En Medios > Biblioteca", "En Apariencia > Personalizar > Identidad del sitio", "En el archivo header.php"], a: 2, e: "Es una opci√≥n est√°ndar del Personalizador de WordPress." },

        // --- BLOQUE 2: ELEMENTOR (Trampas de Dise√±o) ---
        { q: "Si quieres que una secci√≥n tenga el ancho completo de la pantalla pero el contenido se quede centrado (ancho caja), ¬øqu√© configuraci√≥n usas?", o: ["Ancho de contenido: Ancho completo", "Ancho de contenido: Caja (Boxed) y Estirar Secci√≥n: S√≠", "Ancho de contenido: Caja (Boxed) en una secci√≥n normal", "Margen izquierdo y derecho: 0"], a: 2, e: "La secci√≥n por defecto ya ocupa el 100% del fondo, pero 'Caja' mantiene el texto en el centro legible." },
        { q: "Si editas un Widget y le pones un margen negativo superior (-50px), ¬øqu√© efecto visual consigues?", o: ["El widget se hace m√°s peque√±o", "El widget baja y se separa del anterior", "El widget sube y se monta encima del elemento anterior", "El widget desaparece"], a: 2, e: "El margen negativo 'tira' del elemento hacia el lado contrario, superponi√©ndolo." },
        { q: "¬øCu√°l es la diferencia entre 'Estilo del Tema' (Theme Style) y 'Ajustes del Sitio' (Site Settings) en Elementor?", o: ["Son lo mismo", "Estilo del Tema controla colores/tipos globales; Ajustes del Sitio controla el layout y lightbox", "Estilo del tema es para el tema hijo", "Uno es de la versi√≥n Free y otro de la Pro"], a: 1, e: "En las versiones nuevas todo est√° unificado en 'Ajustes del Sitio', pero controlan cosas globales distintas." },
        { q: "Si un cambio de fuente (tipograf√≠a) se ve en el editor de Elementor pero NO en la web p√∫blica, ¬øqu√© es lo m√°s probable?", o: ["Que no has guardado la p√°gina", "Que es un problema de cach√© o de regeneraci√≥n de CSS", "Que la fuente es de pago", "Que el navegador no es compatible"], a: 1, e: "Elementor genera archivos CSS. Si no se regeneran, se ve el dise√±o antiguo." },
        { q: "En el 'Navegador' (Capas), ¬øc√≥mo ocultas un elemento solo en el editor para que no moleste, pero que se siga viendo en la web?", o: ["Haciendo clic en el icono del 'Ojo'", "Borrando el elemento", "Usando la opci√≥n 'Ocultar en escritorio'", "Cambiando la opacidad a 0"], a: 0, e: "El ojito del navegador solo afecta a tu vista de trabajo actual, no al frontend." },
        { q: "¬øQu√© pasa si desactivas la opci√≥n 'Estirar Secci√≥n' (Stretch Section) en una secci√≥n que quer√≠as de ancho completo?", o: ["Se borra el contenido", "El fondo de la secci√≥n se corta y no llega a los bordes de la pantalla", "El texto se hace peque√±o", "El men√∫ desaparece"], a: 1, e: "Si el tema limita el ancho de la web (container), 'Estirar Secci√≥n' fuerza mediante JS a romper ese l√≠mite." },
        { q: "Si quieres usar una tipograf√≠a que no est√° en Google Fonts, ¬øqu√© haces en Elementor?", o: ["No se puede usar", "Usar la funci√≥n 'Fuentes personalizadas' (Custom Fonts) y subir los archivos woff/woff2", "Pegar el archivo en la biblioteca de medios", "Instalar un plugin de fuentes"], a: 1, e: "Elementor Pro permite subir tus propias tipograf√≠as y asignarlas globalmente." },
        { q: "Para crear una plantilla de cabecera (Header) que cambie de color al hacer scroll (Sticky effects), ¬øqu√© necesitas?", o: ["Solo CSS personalizado", "Elementor Pro y configurar 'Efectos de movimiento' > Sticky", "Un plugin de men√∫ adicional", "Cambiar el tema a Astra"], a: 1, e: "La propiedad Sticky est√° nativa en la pesta√±a Avanzado de la secci√≥n." },
        { q: "¬øQu√© condici√≥n de visualizaci√≥n (Display Condition) usas para que un Popup salga SOLO en la p√°gina de 'Contacto'?", o: ["Entire Site", "Singular > P√°ginas > Contacto", "Archivos > Contacto", "Singular > Todas las p√°ginas"], a: 1, e: "Debes ser espec√≠fico: Es un contenido singular, de tipo p√°gina, y concretamente la de Contacto." },
        { q: "Si el men√∫ m√≥vil (Hamburguesa) sale alineado a la izquierda y lo quieres a la derecha, ¬øqu√© ajustas?", o: ["La alineaci√≥n del widget de men√∫ en la pesta√±a Contenido", "El margen de la columna", "La posici√≥n absoluta", "El padding de la secci√≥n"], a: 0, e: "El widget Nav Menu tiene controles de alineaci√≥n espec√≠ficos para el toggle (hamburguesa)." },

        // --- BLOQUE 3: WOOCOMMERCE (Tienda) ---
        { q: "Si vendes un Ebook y quieres que al comprarlo NO se cobren gastos de env√≠o, ¬øqu√© casilla es la clave?", o: ["Producto Simple", "Virtual", "Descargable", "Gesti√≥n de inventario"], a: 1, e: "La casilla 'Virtual' es la que le dice a WooCommerce: 'esto no pesa, no pidas direcci√≥n'." },
        { q: "Para que un cliente pueda elegir 'Talla' y 'Color' en un producto, ¬øqu√© tipo de producto debes seleccionar?", o: ["Producto Simple con opciones", "Producto Variable", "Producto Agrupado", "Producto Externo"], a: 1, e: "Solo el Variable permite combinar atributos y generar referencias (SKU) distintas." },
        { q: "Si has creado los atributos 'Talla' pero no te deja crear las variaciones, ¬øqu√© olvidaste marcar?", o: ["Visible en la p√°gina de productos", "Usado para variaciones", "Gesti√≥n de inventario", "Habilitar archivos"], a: 1, e: "Es el error m√°s com√∫n. Si no marcas esa casilla, el atributo es solo texto informativo." },
        { q: "¬øD√≥nde se configuran los correos que recibe el cliente (colores, cabecera, pie)?", o: ["En cada producto", "En WooCommerce > Ajustes > Correos electr√≥nicos", "En Apariencia > Personalizar > WooCommerce", "No se pueden personalizar"], a: 1, e: "Ah√≠ defines el color base, la imagen de cabecera y el texto del pie de los emails." },
        { q: "Si quieres vender productos de Amazon llev√°ndote una comisi√≥n, ¬øqu√© tipo de producto usas?", o: ["Producto Simple", "Producto Externo/Afiliado", "Producto Variable", "Producto Virtual"], a: 1, e: "Sustituye el bot√≥n 'A√±adir al carrito' por un bot√≥n que lleva a la URL externa que t√∫ digas." },
        { q: "¬øQu√© estado de pedido se activa autom√°ticamente cuando un cliente paga con tarjeta correctamente?", o: ["Completado", "Procesando", "En espera", "Pendiente de pago"], a: 1, e: "Procesando = Pagado y pendiente de env√≠o. Completado = Pagado y enviado." },
        { q: "Si quieres cobrar 5‚Ç¨ de env√≠o a Madrid y 10‚Ç¨ a Barcelona, ¬øqu√© necesitas configurar?", o: ["Dos m√©todos de env√≠o distintos", "Zonas de env√≠o geogr√°ficas (por c√≥digo postal o provincia)", "Clases de env√≠o en el producto", "Cupones de descuento"], a: 1, e: "Las zonas delimitan 'd√≥nde' y los m√©todos delimitan 'cu√°nto' en esa zona." },
        { q: "¬øQu√© pasa si borras un pedido 'Completado' de la lista de pedidos?", o: ["Nada, solo se borra de la lista", "Se descuenta el dinero de los informes de ventas", "Se devuelve el dinero al cliente", "El pedido se archiva"], a: 1, e: "WooCommerce es din√°mico: si borras el pedido, las gr√°ficas de ingresos bajan." },
        { q: "Para que un cliente pueda descargar su archivo digital, ¬øel pedido debe estar en qu√© estado?", o: ["Pendiente de pago", "En espera", "Procesando o Completado", "Cualquiera"], a: 2, e: "Solo los estados que confirman el pago liberan el enlace de descarga." },
        { q: "Si quieres que los productos agotados no aparezcan en la tienda, ¬ød√≥nde lo configuras?", o: ["Borrando los productos manualmentes", "En WooCommerce > Ajustes > Productos > Inventario > Ocultar productos agotados", "En cada producto individualmente", "Con un plugin"], a: 1, e: "Es un ajuste global de visibilidad de cat√°logo." },

        // --- BLOQUE 4: HERRAMIENTAS Y PLUGINS (Uso real) ---
        { q: "En el plugin Yoast SEO, ¬øqu√© significa que la bolita de SEO est√© en rojo?", o: ["Que la web tiene un virus", "Que el contenido no cumple las directrices que has marcado (palabra clave, longitud, etc.)", "Que Google te ha penalizado", "Que el plugin est√° desactivado"], a: 1, e: "Es una gu√≠a de optimizaci√≥n de contenido, no un reporte de Google real." },
        { q: "Si usas Contact Form 7, ¬ød√≥nde configuras el correo al que llegan los mensajes?", o: ["En Ajustes > Generales", "En la pesta√±a 'Correo' dentro de la edici√≥n del formulario", "En el perfil de usuario", "En el shortcode"], a: 1, e: "Cada formulario tiene su propia configuraci√≥n de env√≠o (destinatario, asunto, cuerpo)." },
        { q: "¬øQu√© hace exactamente un plugin de 'Lazy Load' (Carga diferida)?", o: ["Carga las im√°genes con baja calidad", "Evita que se carguen las im√°genes que no est√°n visibles en la pantalla hasta que haces scroll", "Hace que la web cargue lento a prop√≥sito", "Comprime las im√°genes"], a: 1, e: "Ahorra ancho de banda y acelera la carga inicial." },
        { q: "Si usas el plugin 'Duplicator' para migrar una web, ¬øqu√© dos archivos necesitas subir al servidor nuevo?", o: ["La carpeta wp-content y el .htaccess", "El archivo 'installer.php' y el archivo .zip (paquete)", "El wp-config.php y la base de datos", "Solo el instalador"], a: 1, e: "Duplicator genera un paquete comprimido y un script PHP para descomprimirlo." },
        { q: "Para traducir cadenas de texto internas del tema (ej: 'Read more' -> 'Leer m√°s'), ¬øqu√© plugin usamos en el curso?", o: ["WPML", "Loco Translate", "Google Translate", "Polylang"], a: 1, e: "Es la herramienta est√°ndar para editar archivos .po/.mo desde el admin." },
        { q: "Si instalas Wordfence, ¬øqu√© es lo primero que suele pedirte configurar?", o: ["El dise√±o del firewall", "Un correo electr√≥nico para alertas de seguridad", "La contrase√±a de la base de datos", "El idioma"], a: 1, e: "Necesita un email para avisarte de bloqueos o accesos sospechosos." },
        { q: "¬øQu√© diferencia hay entre 'UpdraftPlus' y 'All-in-One WP Migration'?", o: ["Ninguna", "UpdraftPlus permite programar copias a la nube (Drive/Dropbox); All-in-One suele ser manual (en versi√≥n free)", "All-in-One es para seguridad", "UpdraftPlus es para SEO"], a: 1, e: "Updraft destaca por las copias programadas remotas." },
        { q: "Si usas un plugin de Cach√© (WP Rocket/W3TC) y haces un cambio en el CSS que no se ve, ¬øqu√© bot√≥n debes pulsar?", o: ["Borrar/Purgar toda la cach√©", "Desactivar el plugin", "Reinstalar WordPress", "Actualizar el navegador"], a: 0, e: "Debes vaciar la versi√≥n est√°tica guardada para que se genere una nueva con tus cambios." },
        { q: "¬øQu√© hace el plugin 'Redirection' cuando cambias la URL de una entrada?", o: ["Nada", "Crea autom√°ticamente una redirecci√≥n 301 de la URL antigua a la nueva", "Borra la entrada antigua", "Te avisa por correo"], a: 1, e: "Ayuda a no perder SEO ni generar errores 404 al reorganizar contenido." },
        { q: "En el plugin 'CookieYes' (o similares), ¬øqu√© es el 'Bloqueo de scripts'?", o: ["Un error", "La funci√≥n que impide que carguen Analytics o Facebook Pixel hasta que el usuario acepta las cookies", "Una opci√≥n de dise√±o", "Seguridad contra hackers"], a: 1, e: "Es obligatorio por ley: no se pueden poner cookies sin consentimiento previo." },

        // --- BLOQUE 5: GENERAL / TROUBLESHOOTING (Soluci√≥n de problemas) ---
        { q: "Si la web se queda en blanco (Pantalla Blanca) despu√©s de instalar un plugin y no puedes entrar al admin, ¬øqu√© haces?", o: ["Borras la base de datos", "Entras por FTP/Hosting y cambias el nombre de la carpeta del plugin (ej: 'plugin-old')", "Esperas 24 horas", "Reinstalas WordPress"], a: 1, e: "Al cambiar el nombre, WordPress desactiva el plugin forzosamente y la web vuelve." },
        { q: "Si las im√°genes dan 'Error HTTP' al subir, pero pesan poco, ¬øcu√°l suele ser el problema?", o: ["El nombre del archivo tiene caracteres raros (√±, tildes) o es demasiado grande en p√≠xeles", "Es un virus", "El color de la imagen", "WordPress no admite JPG"], a: 0, e: "WordPress odia las tildes en los nombres de archivo y las resoluciones gigantes (ej: 5000px)." },
        { q: "¬øQu√© significa un error 404?", o: ["Error del servidor (ca√≠do)", "P√°gina no encontrada (la URL no existe)", "Acceso denegado", "Error de base de datos"], a: 1, e: "El servidor funciona, pero lo que pides no est√° ah√≠." },
        { q: "Si tu web carga pero se ve 'rota' (sin estilos CSS, todo texto plano) y la consola dice 'Mixed Content', ¬øqu√© pasa?", o: ["Has borrado el tema", "Est√°s cargando la web por HTTPS pero los estilos est√°n en HTTP", "Es un error de PHP", "Falta el plugin Elementor"], a: 1, e: "El navegador bloquea los recursos inseguros (HTTP) cuando la web es segura (HTTPS)." },
        { q: "¬øQu√© es el archivo .htaccess?", o: ["Un archivo de texto con claves", "Un archivo de configuraci√≥n del servidor Apache (redirecciones, seguridad, permalinks)", "La base de datos", "El archivo de estilos"], a: 1, e: "Controla c√≥mo el servidor maneja las peticiones antes de llegar a WordPress." },
        { q: "Si pierdes la contrase√±a de administrador y el correo de recuperaci√≥n no llega, ¬ød√≥nde la cambias directamente?", o: ["En el archivo wp-config.php", "En la base de datos (phpMyAdmin), tabla wp_users, editando el campo user_pass (MD5)", "Por FTP", "No se puede"], a: 1, e: "Es la 'puerta trasera' t√©cnica para recuperar el acceso." },
        { q: "¬øPara qu√© sirve el 'Modo Mantenimiento'?", o: ["Para arreglar la web sola", "Para mostrar una p√°gina de aviso a los visitantes mientras t√∫ trabajas en privado", "Para cerrar la web para siempre", "Para hacer copias"], a: 1, e: "Evita que los usuarios vean errores o dise√±os a medias." },
        { q: "Si un shortcode se ve as√≠ en la web: [contact-form-7 id='123'], ¬øqu√© significa?", o: ["Que funciona bien", "Que el plugin Contact Form 7 est√° desactivado o borrado", "Que el formulario est√° vac√≠o", "Que es un virus"], a: 1, e: "WordPress no procesa el c√≥digo porque falta el motor (plugin) que lo traduce." },
        { q: "¬øQu√© diferencia hay entre Dominio y Hosting?", o: ["Son lo mismo", "Dominio es el nombre (midominio.com) y Hosting es el ordenador donde est√°n los archivos", "Hosting es el nombre", "Dominio es gratis"], a: 1, e: "Direcci√≥n vs Casa." },
        { q: "Si quieres a√±adir un c√≥digo de seguimiento (Pixel/Analytics) sin editar el tema, ¬øqu√© usas?", o: ["Lo pegas en una entrada", "Un plugin de 'Insert Headers and Footers' o 'Code Snippets'", "Lo pegas en el CSS", "Lo subes por FTP"], a: 1, e: "Es la forma segura de inyectar scripts en la cabecera <head>." },

        // --- BLOQUE 6: CONCEPTOS VISUALES Y DISE√ëO ---
        { q: "¬øQu√© significa 'Mobile First'?", o: ["Que la web solo es para m√≥viles", "Que Google prioriza la versi√≥n m√≥vil para indexar y el dise√±o debe pensarse primero para pantallas peque√±as", "Que las fotos no importan", "Que se usan Apps"], a: 1, e: "Cambio de paradigma: el escritorio ya no es lo principal." },
        { q: "¬øQu√© es un Mockup?", o: ["El c√≥digo final", "Un boceto visual est√°tico (en Photoshop/Figma) de c√≥mo ser√° la web", "Una copia de seguridad", "Un men√∫"], a: 1, e: "Fase de dise√±o previo a la implementaci√≥n." },
        { q: "¬øQu√© es el 'Padding'?", o: ["El espacio entre dos secciones", "El espacio interno entre el borde de una caja y su contenido", "El borde", "La sombra"], a: 1, e: "Relleno interior." },
        { q: "¬øQu√© es una imagen 'Hero'?", o: ["Una foto de un superh√©roe", "La secci√≥n principal grande con imagen/v√≠deo que suele ir al principio de la Home", "El logo", "El pie de p√°gina"], a: 1, e: "La primera impresi√≥n visual de la web." },
        { q: "¬øQu√© es un CTA (Call to Action)?", o: ["Un error t√©cnico", "Un elemento (bot√≥n/enlace) dise√±ado para provocar una acci√≥n inmediata (ej: 'Compra ya')", "Un contacto", "Un men√∫"], a: 1, e: "El objetivo de conversi√≥n de la p√°gina." },
        { q: "¬øQu√© es el Favicon?", o: ["El logo del men√∫", "El icono peque√±o que sale en la pesta√±a del navegador junto al t√≠tulo", "Un plugin", "Un error"], a: 1, e: "Identidad visual en el navegador." },
        { q: "¬øPara qu√© sirve el texto ALT de una imagen?", o: ["Para ponerle t√≠tulo", "Para accesibilidad (ciegos) y para que Google entienda de qu√© va la foto", "Para que pese menos", "Para ponerle marco"], a: 1, e: "Fundamental para SEO y accesibilidad." },
        { q: "¬øQu√© es un 'Sidebar'?", o: ["El men√∫ superior", "Una barra lateral (izquierda o derecha) donde poner widgets", "El pie de p√°gina", "La cabecera"], a: 1, e: "Zona cl√°sica de blogs y tiendas." },
        { q: "¬øQu√© es un 'Anchor Link' (Enlace ancla)?", o: ["Un enlace a otra web", "Un enlace que te lleva a una secci√≥n espec√≠fica dentro de la misma p√°gina (#seccion)", "Un enlace roto", "Un men√∫"], a: 1, e: "Permite navegaci√≥n interna vertical (One Page)." },
        { q: "¬øQu√© significa que un dise√±o sea 'Pixel Perfect'?", o: ["Que usa fotos HD", "Que la web desarrollada es id√©ntica al dise√±o/mockup aprobado al mil√≠metro", "Que tiene muchos colores", "Que es responsive"], a: 1, e: "El grado m√°ximo de fidelidad en la maquetaci√≥n." }
    ];

    let questions = []; 
    let timer;
    let timeLeft = 45 * 60; 

    function init() {
        if(typeof DB === 'undefined') return alert("‚ö†Ô∏è ERROR: No has pegado las preguntas.");
        
        // Seleccionar 50 aleatorias
        questions = DB.sort(() => 0.5 - Math.random()).slice(0, 50);
        
        const container = document.getElementById('quiz-container');
        container.innerHTML = ""; 
        
        questions.forEach((q, index) => {
            // --- FIX: A√±adir comprobaci√≥n para evitar errores si una pregunta no tiene opciones ---
            if (!q.o || !Array.isArray(q.o)) {
                console.error(`Pregunta #${index} omitida por no tener opciones v√°lidas.`, q);
                return; // Saltar esta pregunta
            }
            // --- FIN DEL FIX ---

            let html = `
                <div class="card" id="card-${index}">
                    <div class="q-text"><span style="color:#2271b1; font-weight:800;">#${index + 1}</span> ${q.q}</div>
            `;
            
            // Barajar opciones visualmente
            let indices = q.o.map((_, i) => i);
            indices.sort(() => 0.5 - Math.random());

            html += `<div class="options-group">`;
            indices.forEach(i => {
                html += `
                    <label class="option-label" id="lbl-${index}-${i}">
                        <input type="radio" name="q_${index}" value="${i}">
                        ${q.o[i]}
                    </label>
                `;
            });

            html += `</div>
                     <div class="explanation-box" id="exp-${index}"></div>
                     </div>`;
            container.innerHTML += html;
        });

        startTimer();
        
        // Barra de progreso
        document.querySelectorAll('input').forEach(i => {
            i.addEventListener('change', () => {
                const answered = document.querySelectorAll('input:checked').length;
                document.getElementById('progress').style.width = `${(answered/50)*100}%`;
            });
        });
    }

    window.finishExam = function() {
        clearInterval(timer);
        
        let correctCount = 0;
        let reviewHTML = "";

        // Recorremos las 50 preguntas
        questions.forEach((q, index) => {
            const card = document.getElementById(`card-${index}`);
            const expBox = document.getElementById(`exp-${index}`);
            const selected = document.querySelector(`input[name="q_${index}"]:checked`);
            
            let userVal = selected ? parseInt(selected.value) : -1; 
            let isCorrect = (userVal === q.a);
            
            // Bloquear inputs
            card.querySelectorAll('input').forEach(i => i.disabled = true);

            // LOGICA VISUAL DETALLADA
            if (isCorrect) {
                correctCount++;
                card.classList.add('correct-card');
                document.getElementById(`lbl-${index}-${userVal}`).classList.add('correct-answer');
                expBox.innerHTML = `<strong>‚úÖ ¬°CORRECTO!</strong>${q.e}`;
                
                // Add to modal review
                reviewHTML += `<div class="review-item r-correct"><b>${index+1}. Acierto</b><br>Tu respuesta: ${q.o[userVal]}</div>`;
            
            } else if (userVal !== -1) {
                // Fall√≥
                card.classList.add('wrong-card');
                document.getElementById(`lbl-${index}-${userVal}`).classList.add('user-wrong');
                document.getElementById(`lbl-${index}-${q.a}`).classList.add('correct-answer');
                expBox.innerHTML = `<strong>‚ùå FALLO</strong><br>La correcta era: <b>${q.o[q.a]}</b><br><em>${q.e}</em>`;
                
                reviewHTML += `<div class="review-item r-wrong"><b>${index+1}. Fallo</b><br>Tu respuesta: ${q.o[userVal]}<br>Correcta: <strong>${q.o[q.a]}</strong></div>`;
            
            } else {
                // En blanco
                card.classList.add('wrong-card');
                document.getElementById(`lbl-${index}-${q.a}`).classList.add('correct-answer');
                expBox.innerHTML = `<strong>‚ö™ EN BLANCO</strong><br>La correcta era: <b>${q.o[q.a]}</b><br><em>${q.e}</em>`;
                
                reviewHTML += `<div class="review-item r-wrong"><b>${index+1}. En blanco</b><br>Correcta: <strong>${q.o[q.a]}</strong></div>`;
            }
            
            expBox.style.display = 'block';
        });

        // BAREMO CEI
        let verdict = "";
        let color = "";

        if (correctCount >= 45) { // 45-50
            verdict = "SOBRESALIENTE üèÜ";
            color = "#28a745";
        } else if (correctCount >= 40) { // 40-44
            verdict = "NOTABLE üåü";
            color = "#17a2b8";
        } else if (correctCount >= 35) { // 35-39
            verdict = "BIEN üëç";
            color = "#2271b1";
        } else if (correctCount >= 30) { // 30-34
            verdict = "APTO üëå";
            color = "#fd7e14";
        } else {
            verdict = "NO APTO ‚ùå";
            color = "#dc3545";
        }

        // PINTAR MODAL
        document.getElementById('score-display').innerText = `${correctCount} / 50`;
        document.getElementById('score-display').style.color = color;
        
        const vText = document.getElementById('verdict-text');
        vText.innerText = verdict;
        vText.style.color = color;

        document.getElementById('res-correct').innerText = correctCount;
        document.getElementById('res-wrong').innerText = 50 - correctCount;

        document.getElementById('detailed-review').innerHTML = reviewHTML;
        document.getElementById('result-modal').style.display = 'flex';
    };

    function startTimer() {
        timer = setInterval(() => {
            timeLeft--;
            let m = Math.floor(timeLeft / 60);
            let s = timeLeft % 60;
            document.getElementById('timer').innerText = `${m}:${s < 10 ? '0'+s : s}`;
            if(timeLeft <= 0) finishExam();
        }, 1000);
    }

    window.onload = function() {
        if(typeof DB !== 'undefined') init();
    };

</script>
</body>
</html>