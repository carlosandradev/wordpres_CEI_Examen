<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Simulador WordPress CEI - Versi√≥n Final Pro</title>
    <style>
        :root { --primary: #2271b1; --success: #00a32a; --error: #d63638; --bg: #f0f0f1; }
        body { font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif; background-color: var(--bg); color: #3c434a; margin: 0; padding-bottom: 100px; }
        
        /* HEADER FIJO */
        .header { position: fixed; top: 0; left: 0; right: 0; background: #fff; border-bottom: 1px solid #c3c4c7; padding: 10px 20px; z-index: 1000; display: flex; justify-content: space-between; align-items: center; box-shadow: 0 1px 3px rgba(0,0,0,0.05); }
        .logo { font-weight: 700; color: var(--primary); font-size: 1.2rem; }
        .timer-box { font-variant-numeric: tabular-nums; font-size: 1.5rem; font-weight: 600; color: #1d2327; }
        .pause-btn { background: #f6f7f7; border: 1px solid #2271b1; color: #2271b1; padding: 5px 15px; cursor: pointer; border-radius: 3px; font-weight: 600; transition: 0.2s; }
        .pause-btn:hover { background: #f0f0f1; }

        /* CONTENEDOR */
        .container { max-width: 800px; margin: 80px auto 20px; padding: 0 15px; }

        /* TARJETAS DE PREGUNTA */
        .card { background: #fff; border: 1px solid #c3c4c7; padding: 20px; margin-bottom: 20px; border-left: 4px solid var(--primary); box-shadow: 0 1px 2px rgba(0,0,0,0.05); position: relative; }
        .q-text { font-size: 1.1rem; font-weight: 600; margin-bottom: 15px; line-height: 1.4; }
        
        .option-label { display: flex; align-items: flex-start; gap: 10px; padding: 10px; border: 1px solid #dcdcde; border-radius: 4px; cursor: pointer; transition: all 0.2s; margin-bottom: 8px; }
        .option-label:hover { background: #f6f7f7; border-color: var(--primary); }
        .option-label input { margin-top: 4px; transform: scale(1.2); cursor: pointer; }

        /* ESTADOS DE RESPUESTA */
        .option-label.correct { background: #edfaef; border-color: var(--success); color: #005c1e; }
        .option-label.wrong { background: #fcf0f1; border-color: var(--error); color: #8a2424; text-decoration: line-through; }
        .explanation-box { display: none; margin-top: 15px; padding: 12px; background: #f0f0f1; border-left: 4px solid #72aee6; font-size: 0.95rem; }
        
        /* BOTONES */
        .check-btn { background: var(--primary); color: white; border: none; padding: 8px 16px; border-radius: 3px; cursor: pointer; font-size: 0.9rem; margin-top: 10px; }
        .check-btn:hover { background: #135e96; }
        .check-btn:disabled { background: #a7aaad; cursor: default; }

        .fab-finish { position: fixed; bottom: 20px; right: 20px; background: var(--error); color: white; padding: 15px 30px; border-radius: 50px; border: none; font-size: 1.1rem; font-weight: bold; cursor: pointer; box-shadow: 0 4px 10px rgba(0,0,0,0.2); z-index: 999; transition: transform 0.2s; }
        .fab-finish:hover { transform: scale(1.05); background: #b32d2e; }

        /* MODALES */
        .modal { display: none; position: fixed; inset: 0; background: rgba(0,0,0,0.85); z-index: 2000; justify-content: center; align-items: center; flex-direction: column; color: white; text-align: center; }
        .modal-content { background: white; color: #333; padding: 40px; border-radius: 8px; max-width: 500px; width: 90%; text-align: center; }
        .score-big { font-size: 4rem; font-weight: 800; margin: 10px 0; color: var(--primary); }
        .btn-restart { background: var(--success); color: white; border: none; padding: 15px 30px; font-size: 1.2rem; cursor: pointer; border-radius: 5px; width: 100%; margin-top: 20px; }
        
        /* BARRA PROGRESO */
        .progress-bar { position: fixed; top: 60px; left: 0; height: 5px; background: #ddd; width: 100%; z-index: 999; }
        .progress-fill { height: 100%; background: #00a0d2; width: 0%; transition: width 0.3s; }
    </style>
</head>
<body>

    <div id="pause-modal" class="modal">
        <h1>EXAMEN PAUSADO</h1>
        <button class="pause-btn" onclick="togglePause()" style="font-size:1.5rem; padding: 20px 40px; background:white; border:none;">REANUDAR</button>
    </div>

    <div id="results-modal" class="modal">
        <div class="modal-content">
            <h2>Resultado Final</h2>
            <div id="score-display" class="score-big">0.0</div>
            <p id="score-msg" style="font-size: 1.2rem;"></p>
            <div style="text-align:left; margin-top:20px; background:#f0f0f1; padding:15px; border-radius:5px;">
                <p>‚úÖ Aciertos: <span id="res-correct">0</span></p>
                <p>‚ùå Fallos: <span id="res-wrong">0</span></p>
                <p>‚ö™ Sin responder: <span id="res-blank">0</span></p>
            </div>
            <button class="btn-restart" onclick="location.reload()">GENERAR NUEVO EXAMEN</button>
        </div>
    </div>

    <header class="header">
        <div class="logo">Examen WP (50 Preguntas)</div>
        <div style="display: flex; gap: 15px; align-items: center;">
            <div class="timer-box" id="timer">45:00</div>
            <button class="pause-btn" onclick="togglePause()">II PAUSA</button>
        </div>
    </header>
    <div class="progress-bar"><div class="progress-fill" id="progress"></div></div>

    <div class="container" id="quiz-container"></div>

    <button class="fab-finish" onclick="finishExam()">FINALIZAR Y CORREGIR TODO</button>

<script>
    // --- BASE DE DATOS CORREGIDA (120 PREGUNTAS) ---
    const DB = [
        // ARQUITECTURA Y CORE
        { q: "¬øQu√© archivo es OBLIGATORIO para que WordPress reconozca un tema nuevo (adem√°s del index.php)?", o: ["functions.php", "style.css", "screenshot.png", "header.php"], a: 1, e: "style.css debe contener la cabecera con el nombre del tema (Theme Name)." },
        { q: "En la Jerarqu√≠a de Plantillas, si no existe 'category.php', ¬øqu√© busca WordPress inmediatamente despu√©s?", o: ["index.php", "archive.php", "page.php", "single.php"], a: 1, e: "Orden: category-slug > category-id > category > archive > index." },
        { q: "Si mueves tu WordPress de dominio y no accedes, ¬øqu√© constantes defines en wp-config.php?", o: ["WP_NEWHOME y WP_NEWURL", "WP_HOME y WP_SITEURL", "RELOCATE_URL", "CHANGE_DOMAIN"], a: 1, e: "Sobrescriben los valores de la base de datos temporalmente." },
        { q: "¬øQu√© ocurre t√©cnicamente cuando activas 'WP_DEBUG' a true?", o: ["Se muestra el log de accesos", "Se muestran errores y avisos PHP en el front-end", "La web se pone en mantenimiento", "Se borra la cach√©"], a: 1, e: "Nunca debe estar activo en producci√≥n." },
        { q: "¬øD√≥nde se almacenan los datos serializados de los Widgets?", o: ["wp_posts", "wp_options", "wp_termmeta", "wp_users"], a: 1, e: "Cuidado al hacer buscar-reemplazar en la DB." },
        { q: "¬øQu√© permiso chmod es el correcto y seguro para wp-config.php?", o: ["777", "755", "644 o 600", "000"], a: 2, e: "777 es una vulnerabilidad cr√≠tica." },
        { q: "¬øQu√© funci√≥n es vital en header.php para cargar scripts de plugins?", o: ["wp_head()", "get_header()", "wp_footer()", "include_once()"], a: 0, e: "Sin wp_head(), los plugins no pueden inyectar su CSS/JS." },
        { q: "Error 'Allowed memory size exhausted', ¬ød√≥nde se soluciona?", o: ["Borrando im√°genes", "Aumentando memory_limit en wp-config.php", "Cambiando tema", "Reinstalando"], a: 1, e: "Falta de RAM asignada a PHP." },
        { q: "¬øQu√© es el 'Salt' en wp-config.php?", o: ["Seguridad cookies", "Claves de encriptaci√≥n de sesi√≥n", "Prefijo DB", "Cach√©"], a: 1, e: "Invalidan todas las cookies de sesi√≥n al cambiarlas." },
        { q: "¬øQu√© es 'MySQL'?", o: ["El sistema de base de datos de WP", "Un lenguaje", "Un plugin", "Un tema"], a: 0, e: "Donde se guardan los datos (texto, opciones)." },
        { q: "¬øQu√© es la 'REST API' de WordPress?", o: ["Un plugin", "Interfaz que permite a aplicaciones externas (Apps m√≥viles, JS) interactuar con los datos de WP (JSON)", "Un tema", "Un error"], a: 1, e: "Convierte a WP en un framework de aplicaciones (Headless WP)." },
        { q: "¬øQu√© es un 'Hook'?", o: ["Error", "Punto para enganchar funciones (Action/Filter)", "Pirata", "Dise√±o"], a: 1, e: "Base de extensibilidad." },
        { q: "Funci√≥n 'the_content()':", o: ["T√≠tulo", "Muestra cuerpo del post", "Fecha", "Autor"], a: 1, e: "Esencial en el loop." },
        { q: "Diferencia site_url() vs home_url():", o: ["Ninguna", "site: archivos WP; home: direcci√≥n visita", "home: admin", "site: img"], a: 1, e: "Distintos si WP est√° en subdirectorio." },
        { q: "¬øQu√© es un 'Must-Use Plugin' (mu-plugin)?", o: ["Recomendado", "Must-Use: Ejecuci√≥n forzosa, no desactivable en admin", "Pago", "M√∫sica"], a: 1, e: "Carga antes que los normales." },
        { q: "¬øQu√© archivo evita que Google indexe una carpeta concreta del servidor?", o: [".htaccess", "robots.txt", "index.php", "config.php"], a: 1, e: "Disallow: /carpeta/ en robots.txt." },
        { q: "¬øPor qu√© se recomienda desactivar XML-RPC si no se usa?", o: ["Por velocidad", "Es un vector com√∫n de ataques de fuerza bruta y DDoS", "Por SEO", "Por dise√±o"], a: 1, e: "Es una API antigua que permite m√∫ltiples intentos de contrase√±a en una sola petici√≥n." },
        { q: "¬øQu√© es un 'Nonce' en WordPress?", o: ["Un insulto", "Number used ONCE: token de seguridad para proteger URLs y formularios contra ataques CSRF", "Un usuario", "Un plugin"], a: 1, e: "Garantiza que la acci√≥n la realiza el usuario que dice ser y desde donde debe ser." },
        { q: "¬øQu√© es 'functions.php'?", o: ["Config", "Act√∫a como plugin del tema", "DB", "Estilo"], a: 1, e: "L√≥gica del tema." },
        { q: "WP_Query es:", o: ["Consulta a DB para traer posts", "Dise√±o", "Plugin", "Error"], a: 0, e: "Base del Loop." },

        // ELEMENTOR PRO
        { q: "CSS Personalizado Elementor: ¬øQu√© palabra selecciona el widget actual?", o: ["#this", "selector", ".elementor-item", "self"], a: 1, e: "Evita tener que poner clases manuales." },
        { q: "¬øQu√© hace 'Regenerar CSS y Datos' en Elementor?", o: ["Borra la DB", "Limpia la cach√© interna de estilos y regenera archivos CSS", "Resetea dise√±o", "Actualiza licencia"], a: 1, e: "Soluciona estilos que no se ven." },
        { q: "¬øC√≥mo crear plantilla 404 personalizada en Elementor Pro?", o: ["P√°gina normal", "Theme Builder > Error 404", "Plugin externo", "Editar PHP"], a: 1, e: "Se asigna autom√°ticamente a URLs rotas." },
        { q: "Mostrar Popup solo en entradas de categor√≠a 'Noticias'. ¬øCondici√≥n?", o: ["Singular > All", "Archives > Noticias", "Singular > Entradas > In Category: Noticias", "Entire Site"], a: 2, e: "Condici√≥n espec√≠fica de taxonom√≠a." },
        { q: "Dos secciones Sticky se solapan mal. ¬øSoluci√≥n?", o: ["Z-Index mayor en la superior", "Z-Index mayor en la inferior", "Margen negativo", "Fondo"], a: 0, e: "Controla el apilamiento." },
        { q: "¬øQu√© es 'Flexbox' en Elementor?", o: ["Plugin", "Modelo de dise√±o unidimensional para distribuir espacio", "Caja flexible", "Error"], a: 1, e: "El nuevo est√°ndar de contenedores." },
        { q: "¬øPara qu√© sirve el widget 'Shortcode'?", o: ["Escribir PHP", "Renderizar salida de plugins externos (ej: Forms)", "Espacios", "Seguridad"], a: 1, e: "Integra plugins sin widget propio." },
        { q: "¬øQu√© hace 'Overflow: Hidden' en un contenedor?", o: ["Oculta todo", "Recorta contenido que se salga de los bordes", "Scroll", "Oculta men√∫"], a: 1, e: "Evita scroll horizontal indeseado." },
        { q: "En Elementor, ¬øqu√© es el 'Navigator'?", o: ["El navegador web", "Un panel de capas tipo Photoshop para ver la estructura HTML", "El mapa", "La ayuda"], a: 1, e: "Indispensable para seleccionar elementos ocultos o superpuestos." },
        { q: "¬øQu√© es el 'Theme Style' (Estilos del Tema) en Elementor?", o: ["Un widget", "Configuraci√≥n global que sobrescribe el CSS del tema (tipograf√≠a, botones, fondos) sin c√≥digo", "Un plugin", "Un error"], a: 1, e: "Permite controlar la identidad visual globalmente." },
        { q: "¬øQu√© ocurre si desactivas Elementor Pro pero dejas Elementor Free?", o: ["Todo funciona igual", "Pierdes las funciones Pro (Header, Footer, Formuarios, CSS Custom), pero el contenido b√°sico se mantiene", "Se borra la web", "Error 500"], a: 1, e: "Los widgets Pro desaparecen o dejan de renderizarse correctamente." },
        { q: "¬øQu√© es el 'Loop Grid' de Elementor?", o: ["Un widget para mostrar listados de posts con un dise√±o de tarjeta totalmente personalizado", "Una galer√≠a", "Un men√∫", "Un formulario"], a: 1, e: "La evoluci√≥n moderna de la visualizaci√≥n de archivos." },
        { q: "¬øQu√© es el 'Maintenance Mode' de Elementor?", o: ["Modo seguro", "Herramienta nativa para mostrar una p√°gina de 'Pr√≥ximamente' o 'Mantenimiento' y devolver c√≥digo 503", "Un error", "Un widget"], a: 1, e: "Evita instalar plugins extra de mantenimiento." },
        { q: "Diferencia px, em, rem:", o: ["Iguales", "px absoluto, rem relativo a ra√≠z", "Colores", "Formatos"], a: 1, e: "Clave para responsive." },
        { q: "Visibility:Hidden vs Display:None:", o: ["Igual", "Hidden ocupa espacio; None lo quita del flujo", "None mejor", "Hidden m√≥vil"], a: 1, e: "Maquetaci√≥n." },
        { q: "¬øQu√© es un 'ID' de CSS?", o: ["Un identificador √∫nico por p√°gina (#header)", "Una clase (.header)", "Una etiqueta", "Un estilo"], a: 0, e: "Identificador √∫nico." },

        // WOOCOMMERCE
        { q: "¬øD√≥nde se guardan los atributos globales de productos?", o: ["wp_postmeta", "wp_options", "wp_terms, wp_termmeta y wp_term_taxonomy", "wp_woocommerce"], a: 2, e: "Funcionan como taxonom√≠as." },
        { q: "Producto Descargable: ¬øC√≥mo proteger el enlace?", o: ["No se puede", "WooCommerce fuerza descarga por PHP ocultando ruta real", "Contrase√±a", "Dropbox"], a: 1, e: "El m√©todo 'Force Download'." },
        { q: "Correos de WooCommerce no llegan. Causa probable:", o: ["Plugin roto", "Falta SMTP en el servidor", "Falta asunto", "Cliente miente"], a: 1, e: "PHP Mail suele fallar o ir a SPAM." },
        { q: "Diferencia Cross-Sell vs Up-Sell:", o: ["Ninguna", "Up-Sell: producto mejor (Ficha); Cross-Sell: complementario (Carrito)", "Al rev√©s", "Afiliados"], a: 1, e: "Up-Sell mejora la venta; Cross-Sell la ampl√≠a." },
        { q: "¬øC√≥mo poner WooCommerce en 'Modo Cat√°logo'?", o: ["Borrando el plugin", "Plugin espec√≠fico o c√≥digo PHP para ocultar bot√≥n compra", "Ajustes", "No se puede"], a: 1, e: "Nativamente no tiene esa opci√≥n." },
        { q: "¬øQu√© es el 'Transient' en WooCommerce?", o: ["Cliente", "Datos temporales cacheados (carrito/fragmentos)", "Env√≠o", "Error"], a: 1, e: "A veces hay que borrarlos si el carrito falla." },
        { q: "¬øQu√© es el 'System Status' de WooCommerce?", o: ["Un informe t√©cnico vital para detectar problemas de memoria, versiones o plugins", "Una factura", "El estado del pedido", "Un tema"], a: 1, e: "Lo primero que se revisa si la tienda falla." },
        { q: "Si vendes productos a Canarias desde pen√≠nsula, ¬øqu√© configuraci√≥n necesitas?", o: ["Nada", "Una Zona de Env√≠o espec√≠fica para Canarias con exenci√≥n de impuestos si aplica", "Otro WooCommerce", "Un plugin de idiomas"], a: 1, e: "WooCommerce permite geolocalizar y cambiar reglas fiscales/env√≠o." },

        // WPO Y SEGURIDAD
        { q: "¬øQu√© regla .htaccess bloquea acceso a wp-config.php?", o: ["Deny from all", "Allow from none", "Block access", "Stop execution"], a: 0, e: "Proh√≠be peticiones HTTP directas." },
        { q: "¬øQu√© es el 'Heartbeat' de WP?", o: ["Salud", "API que comunica navegador-servidor cada 15s (CPU)", "Logo", "Cron"], a: 1, e: "Conviene limitarlo para ahorrar recursos." },
        { q: "Im√°genes WebP en navegador antiguo (Safari viejo). ¬øSoluci√≥n?", o: ["No se ve", "Fallback a JPG usando <picture> o plugin", "Error 404", "B/N"], a: 1, e: "Compatibilidad retroactiva." },
        { q: "Cach√© P√°gina vs Cach√© Objeto:", o: ["Iguales", "P√°gina: HTML est√°tico; Objeto: Consultas DB (Redis)", "Objeto: Im√°genes", "P√°gina: Admin"], a: 1, e: "Object Cache es vital para tiendas." },
        { q: "Error 'Mixed Content' tras activar SSL. Significa:", o: ["Adulto", "Recursos (img/script) cargando por HTTP en web HTTPS", "Error DB", "Duplicado"], a: 1, e: "El candado no sale verde." },
        { q: "¬øQu√© es ataque XSS?", o: ["Robo pass", "Inyecci√≥n scripts maliciosos en navegador de usuario", "Servidor", "Fuerza bruta"], a: 1, e: "Sanitizar inputs es clave." },
        { q: "¬øC√≥mo desactivar edici√≥n de archivos desde admin?", o: ["Imposible", "define('DISALLOW_FILE_EDIT', true);", "Borrar user", "CSS"], a: 1, e: "Seguridad b√°sica." },
        { q: "¬øQu√© es 'WP-Cron'?", o: ["Reloj", "Sistema de tareas programadas ejecutado con visitas", "Virus", "Plugin"], a: 1, e: "Mejor usar cron real del servidor." },

        // SEO Y ESTRUCTURA
        { q: "Meta etiqueta cr√≠tica para Responsive:", o: ["charset", "viewport", "description", "robots"], a: 1, e: "Sin ella, el m√≥vil hace zoom out." },
        { q: "Opci√≥n 'Canonical URL' en Yoast:", o: ["Redirige", "Indica versi√≥n original de contenido duplicado", "Borra", "Velocidad"], a: 1, e: "Evita penalizaci√≥n por duplicidad." },
        { q: "¬øQu√© es sitemap_index.xml?", o: ["Mapa visual", "√çndice que agrupa sub-sitemaps para Search Console", "Robots", "Home"], a: 1, e: "Para no saturar un solo XML." },
        { q: "Etiqueta 'noindex, follow'. El bot:", o: ["Nada", "No indexa pero sigue enlaces", "Indexa sin enlaces", "Borra"], a: 1, e: "Para listados que quieres rastrear pero no posicionar." },
        { q: "¬øQu√© son Datos Estructurados (Schema)?", o: ["DB", "JSON-LD para Rich Snippets (Google)", "CSS", "Plugins"], a: 1, e: "Estrellitas y precios en Google." },

        // TROUBLESHOOTING
        { q: "Error HTTP al subir imagen. Causa NO probable:", o: ["Falta memoria", "Caracteres raros en nombre", "PHP antiguo", "Color de imagen"], a: 3, e: "El color no afecta." },
        { q: "Enlaces internos dan 404 tras migrar. Soluci√≥n:", o: ["Guardar Enlaces Permanentes", "Subir fotos", "Tema", "Cach√©"], a: 0, e: "Regenera .htaccess." },
        { q: "Web carga 'descolocada' (sin CSS) y error 403 en consola:", o: ["CSS borrado", "Permisos incorrectos o firewall bloqueando carpeta", "DB", "Tema"], a: 1, e: "Servidor proh√≠be leer .css." },
        { q: "Error 503 Service Unavailable:", o: ["404", "Servidor saturado/mantenimiento", "Permiso", "Redirecci√≥n"], a: 1, e: "Falta de recursos." },
        { q: "Bucle redirecciones en admin. Causa:", o: ["wp-config", ".htaccess corrupto", "index", "footer"], a: 1, e: "Reglas de reescritura infinitas." },

        // OTROS CONCEPTOS (RAFA Y MANUAL)
        { q: "Captar clientes en fr√≠o (Rafa):", o: ["Llamadas", "Auditor√≠as en v√≠deo (Loom) detectando errores en sus webs", "Spam", "Flyers"], a: 1, e: "Estrategia recomendada." },
        { q: "Live Link en LocalWP:", o: ["Permanente", "T√∫nel temporal para ense√±ar web local", "Error", "Plugin"], a: 1, e: "Ense√±ar avances." },
        { q: "Plugin backups portable:", o: ["Duplicator", "All-in-One WP Migration", "BackupBuddy", "Updraft"], a: 1, e: "Est√°ndar del curso." },
        { q: "Error #1 al lanzar web:", o: ["Posts", "Olvidar desmarcar 'Disuadir motores b√∫squeda'", "Correo", "Hora"], a: 1, e: "Web bloqueada a Google." },
        { q: "Posible tener m√∫ltiples H1?", o: ["No", "HTML5 permite, SEO recomienda uno", "S√≠", "Google penaliza 0"], a: 1, e: "Mejor uno descriptivo." },
        { q: "Tema 'Translation Ready':", o: ["Espa√±ol", "Usa gettext y preparado para .pot", "Translate", "Nada"], a: 1, e: "Traducible con Loco Translate." },
        { q: "Custom Post Type sin plugin?", o: ["Imposible", "S√≠, c√≥digo register_post_type en functions", "Pagando", "Pro"], a: 1, e: "Los plugins solo son interfaz." },
        { q: "Borrar categor√≠a 'Uncategorized':", o: ["Rompe web", "No se puede, es default", "Borra posts", "Nada"], a: 1, e: "Siempre debe haber una por defecto." },
        { q: "Evitar indexar carpeta servidor:", o: ["htaccess", "robots.txt Disallow", "index", "config"], a: 1, e: "Control de rastreo." },
        { q: "Desactivar XML-RPC:", o: ["Velocidad", "Evitar fuerza bruta/DDoS", "SEO", "Dise√±o"], a: 1, e: "API antigua vulnerable." },
        { q: "¬øQu√© es un 'Nonce'?", o: ["Insulto", "Token seguridad uso √∫nico", "User", "Plugin"], a: 1, e: "Protege URLs/Forms." },
        { q: "Imagen Retina Ready:", o: ["Doble densidad p√≠xeles", "Peque√±a", "Azul", "Vector"], a: 1, e: "Nitidez en pantallas nuevas." },
        { q: "Localhost IP:", o: ["127.0.0.1", "192.168.1.1", "0.0.0.0", "8.8.8.8"], a: 0, e: "Tu ordenador." },
        { q: "¬øQu√© es un iframe?", o: ["Una ventana para incrustar contenido externo (ej: Maps)", "Un marco de foto", "Un plugin", "Un error"], a: 0, e: "HTML para embeber recursos." },
        { q: "¬øQu√© es el 'Padding'?", o: ["Relleno interno", "Margen externo", "Borde", "Color"], a: 0, e: "Espacio dentro de la caja." },
        { q: "¬øQu√© es el 'Margin'?", o: ["Espacio externo entre cajas", "Relleno", "Borde", "Color"], a: 0, e: "Separa elementos." },
        { q: "¬øQu√© es un Dominio?", o: ["El nombre de la web (ej: google.com)", "El servidor", "El hosting", "El dise√±o"], a: 0, e: "La direcci√≥n que escribes en el navegador." },
        { q: "¬øQu√© es DNS?", o: ["Sistema que traduce dominios a IPs", "Un servidor", "Un plugin", "Un error"], a: 0, e: "La agenda telef√≥nica de internet." },
        { q: "¬øQu√© es PHP?", o: ["Lenguaje de programaci√≥n de WordPress", "Un dise√±o", "Una base de datos", "Un navegador"], a: 0, e: "Lenguaje del lado del servidor." },
        { q: "¬øQu√© es 'Squoosh'?", o: ["Una bebida", "Herramienta online para comprimir im√°genes", "Un plugin", "Un tema"], a: 1, e: "Recomendada en el curso para optimizar antes de subir." },
        { q: "¬øQu√© es el 'Slug'?", o: ["Un virus", "La parte final amigable de la URL", "El dominio", "La base de datos"], a: 1, e: "Ej: midominio.com/contacto ('contacto' es el slug)." },
        { q: "¬øQu√© es un Child Theme (Tema Hijo)?", o: ["Un tema para ni√±os", "Una plantilla que hereda funciones del padre para modificar c√≥digo sin perderlo al actualizar", "Un plugin", "Un widget"], a: 1, e: "Permite personalizar functions.php y style.css de forma segura." },
        { q: "En Elementor, ¬øqu√© diferencia hay entre Margin y Padding?", o: ["Son iguales", "Margin es espacio interno, Padding externo", "Margin es espacio externo (entre elementos), Padding interno (relleno)", "Ninguna"], a: 2, e: "Margin separa cajas; Padding separa el contenido del borde de su caja." },
        { q: "¬øPara qu√© sirve el atributo 'alt' en las im√°genes?", o: ["Para que carguen r√°pido", "Para SEO y accesibilidad (ciegos)", "Para poner borde", "No sirve"], a: 1, e: "Describe la imagen a Google y lectores de pantalla." },
        { q: "¬øQu√© es un CPT (Custom Post Type)?", o: ["Un tipo de contenido personalizado (ej: Proyectos)", "Un error", "Un plugin de cach√©", "Un comentario"], a: 0, e: "Ampl√≠a WP m√°s all√° de Entradas y P√°ginas." },
        { q: "¬øQu√© herramienta usamos para crear un entorno local en el ordenador?", o: ["LocalWP", "Word", "Photoshop", "Drive"], a: 0, e: "Simula un servidor en tu PC para desarrollar sin internet." },
        { q: "Para vender un PDF descargable, ¬øqu√© casillas marcas en el producto?", o: ["Virtual y Descargable", "Solo Virtual", "F√≠sico", "Agrupado"], a: 0, e: "Virtual quita el env√≠o, Descargable permite subir el archivo." },
        { q: "¬øQu√© es una Zona de Env√≠o en WooCommerce?", o: ["El almac√©n", "√Årea geogr√°fica con tarifas espec√≠ficas", "La direcci√≥n del cliente", "Un plugin"], a: 1, e: "Permite diferenciar precios entre Pen√≠nsula, Canarias, Europa, etc." },
        { q: "Si la web muestra una pantalla blanca (WSOD), ¬øqu√© suele ser?", o: ["Error de PHP o plugin incompatible", "Fallo de internet", "Virus", "Pantalla rota"], a: 0, e: "Error cr√≠tico de ejecuci√≥n de c√≥digo." },
        { q: "¬øQu√© etiqueta HTML es la m√°s importante para el SEO on-page?", o: ["H1", "H2", "Div", "Span"], a: 0, e: "Define el t√≠tulo principal del contenido." },
        { q: "¬øQu√© es el Z-Index en Elementor?", o: ["El zoom", "El orden de apilamiento (capas)", "El color", "El margen"], a: 1, e: "Controla qu√© elemento pasa por encima de otro." },
        { q: "¬øC√≥mo se llama el editor de bloques nativo de WordPress?", o: ["Classic", "Gutenberg", "Divi", "WPBakery"], a: 1, e: "Introducido en la versi√≥n 5.0." },
        { q: "¬øQu√© es el Theme Builder?", o: ["Un constructor de temas (Cabeceras, Pies, Archivos)", "Un plugin de seguridad", "Un hosting", "Un men√∫"], a: 0, e: "Permite dise√±ar las partes estructurales de la web." },
        { q: "¬øQu√© es un 'Blueprint' en LocalWP?", o: ["Un plano azul", "Una plantilla de sitio guardada para reutilizar", "Un error", "Una base de datos"], a: 1, e: "Guarda tu configuraci√≥n base para nuevos proyectos." },
        { q: "¬øQu√© hook se ejecuta justo antes del cierre del body?", o: ["wp_head", "wp_footer", "wp_content", "admin_init"], a: 1, e: "Carga scripts JS y la barra de administraci√≥n." },
        { q: "¬øQu√© es una 'Breadcrumb'?", o: ["Miga de pan (rastro de navegaci√≥n)", "Un plugin de comida", "Un error 404", "Un widget"], a: 0, e: "Mejora UX indicando la ruta: Inicio > Tienda > Producto." },
        { q: "¬øQu√© diferencia hay entre Entradas y P√°ginas?", o: ["Ninguna", "Entradas = Cronol√≥gicas/Din√°micas; P√°ginas = Est√°ticas/Jer√°rquicas", "P√°ginas son para blog", "Entradas no tienen fecha"], a: 1, e: "Concepto base de la arquitectura de WP." },
        { q: "Si quiero traducir cadenas de texto de un tema, ¬øqu√© plugin uso?", o: ["Loco Translate", "WPML", "Yoast", "Jetpack"], a: 0, e: "Editor de archivos PO/MO integrado." },
        { q: "¬øQu√© hace la opci√≥n 'Disuadir a los motores de b√∫squeda' en Ajustes?", o: ["A√±ade noindex a toda la web", "Mejora el SEO", "Borra la web", "Nada"], a: 0, e: "Evita que Google indexe la web mientras est√° en desarrollo." },
        { q: "¬øQu√© es un Shortcode?", o: ["Un c√≥digo corto [ejemplo] para insertar funciones", "Un error", "Una contrase√±a", "Un enlace"], a: 0, e: "M√©todo cl√°sico para incrustar elementos din√°micos." },
        { q: "¬øQu√© es el Favicon?", o: ["El logo grande", "El icono en la pesta√±a del navegador", "El footer", "Un men√∫"], a: 1, e: "Identidad visual en el navegador." },
        { q: "¬øQu√© es un Global Widget en Elementor?", o: ["Un widget mundial", "Un elemento que se actualiza en todas partes si lo editas una vez", "Un mapa", "Un error"], a: 1, e: "√ötil para CTAs repetitivos." },
        { q: "¬øQu√© es HTTPS?", o: ["Protocolo seguro (SSL)", "Protocolo lento", "Web antigua", "Dominio"], a: 0, e: "Cifra la conexi√≥n entre usuario y servidor." },
        { q: "¬øCu√°l es la resoluci√≥n de referencia Desktop est√°ndar?", o: ["1920px", "800px", "4000px", "100px"], a: 0, e: "Ancho Full HD habitual para dise√±o." }
    ];

    // VARIABLES DE ESTADO
    let questions = []; // Las 50 seleccionadas
    let userAnswers = {};
    let timer;
    let timeLeft = 45 * 60; // 45 min
    let isPaused = false;

    // INICIALIZACI√ìN
    function init() {
        // 1. Barajar y coger 50
        questions = DB.sort(() => 0.5 - Math.random()).slice(0, 50);
        
        // 2. Renderizar
        const container = document.getElementById('quiz-container');
        container.innerHTML = ""; // Limpiar
        
        questions.forEach((q, index) => {
            // Crear HTML de la pregunta
            let html = `
                <div class="card" id="card-${index}">
                    <div class="q-text">${index + 1}. ${q.q}</div>
                    <div class="options-group">
            `;
            
            let indices = q.o.map((_, i) => i); // [0, 1, 2, 3]
            // indices.sort(() => 0.5 - Math.random()); // Descomentar para barajar opciones

            indices.forEach(i => {
                html += `
                    <label class="option-label" id="lbl-${index}-${i}">
                        <input type="radio" name="q_${index}" value="${i}">
                        ${q.o[i]}
                    </label>
                `;
            });

            html += `
                    </div>
                    <button class="check-btn" onclick="check(${index})">Comprobar</button>
                    <div class="explanation-box" id="exp-${index}"></div>
                </div>
            `;
            container.innerHTML += html;
        });

        // 3. Iniciar Timer
        startTimer();
    }

    // --- L√ìGICA DE CORRECCI√ìN H√çBRIDA ---

    // 1. Funci√≥n para comprobar UNA pregunta individual (Bot√≥n azul)
    window.check = function(index) {
        const selected = document.querySelector(`input[name="q_${index}"]:checked`);
        if (!selected) return alert("Por favor, selecciona una opci√≥n antes de comprobar.");

        const val = parseInt(selected.value);
        const correct = questions[index].a;
        
        const card = document.getElementById(`card-${index}`);
        const btn = card.querySelector('.check-btn');
        const expBox = document.getElementById(`exp-${index}`);
        
        // Guardar
        userAnswers[index] = (val === correct);

        // Bloquear
        const inputs = card.querySelectorAll('input');
        inputs.forEach(inp => inp.disabled = true);
        btn.disabled = true;
        btn.textContent = "Revisado";
        btn.style.background = "#a7aaad";

        // Feedback
        if (val === correct) {
            document.getElementById(`lbl-${index}-${val}`).classList.add('correct');
            expBox.innerHTML = `<strong>‚úÖ ¬°CORRECTO!</strong><br>${questions[index].e}`;
            expBox.style.borderLeftColor = "#00a32a";
        } else {
            document.getElementById(`lbl-${index}-${val}`).classList.add('wrong');
            document.getElementById(`lbl-${index}-${correct}`).classList.add('correct');
            expBox.innerHTML = `<strong>‚ùå INCORRECTO.</strong><br>La correcta es la marcada en verde.<br><em>${questions[index].e}</em>`;
            expBox.style.borderLeftColor = "#d63638";
        }
        expBox.style.display = "block";
    };

    // 2. Funci√≥n FINAL (Bot√≥n rojo flotante) - CORRIGE TODO LO PENDIENTE
    window.finishExam = function() {
        clearInterval(timer);

        questions.forEach((q, index) => {
            // Si ya se corrigi√≥ individualmente, saltar
            if (userAnswers.hasOwnProperty(index)) return;

            const selected = document.querySelector(`input[name="q_${index}"]:checked`);
            
            if (selected) {
                const val = parseInt(selected.value);
                userAnswers[index] = (val === q.a);
                
                if (val !== q.a) {
                    document.getElementById(`lbl-${index}-${val}`).classList.add('wrong');
                }
                document.getElementById(`lbl-${index}-${q.a}`).classList.add('correct');
            } else {
                userAnswers[index] = false; // Fallo por no responder
                document.getElementById(`lbl-${index}-${q.a}`).classList.add('correct'); // Mostrar cu√°l era
            }
            
            // Bloquear visualmente
            const card = document.getElementById(`card-${index}`);
            const inputs = card.querySelectorAll('input');
            const btn = card.querySelector('.check-btn');
            inputs.forEach(inp => inp.disabled = true);
            if(btn) btn.disabled = true;
        });

        // Calcular Nota
        const totalAciertos = Object.values(userAnswers).filter(r => r === true).length;
        const totalPreguntas = questions.length;
        const notaFinal = (totalAciertos / totalPreguntas) * 10;

        // Mostrar
        document.getElementById('score-display').innerText = notaFinal.toFixed(1);
        document.getElementById('res-correct').innerText = totalAciertos;
        document.getElementById('res-wrong').innerText = totalPreguntas - totalAciertos;
        
        const msg = document.getElementById('score-msg');
        if (notaFinal >= 5) {
            msg.innerHTML = "<strong style='color:#00a32a'>¬°ENHORABUENA, HAS APROBADO! üéâ</strong>";
        } else {
            msg.innerHTML = "<strong style='color:#d63638'>HAS SUSPENDIDO. NECESITAS REPASAR. üìö</strong>";
        }

        document.getElementById('result-modal').style.display = 'flex';
    };

    // TIMER
    function startTimer() {
        timer = setInterval(() => {
            if(!isPaused) {
                timeLeft--;
                let m = Math.floor(timeLeft / 60);
                let s = timeLeft % 60;
                document.getElementById('timer').innerText = `${m}:${s < 10 ? '0'+s : s}`;
                if(timeLeft <= 0) finishExam();
            }
        }, 1000);
    }

    window.togglePause = function() {
        isPaused = !isPaused;
        document.getElementById('pause-modal').style.display = isPaused ? 'flex' : 'none';
    };

    init();

</script>
</body>
</html>