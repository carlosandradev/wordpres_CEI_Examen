<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Simulador Examen WordPress CEI - Versión Estable</title>
    <style>
        body { font-family: 'Segoe UI', Roboto, Helvetica, Arial, sans-serif; background-color: #f1f1f1; margin: 0; padding-bottom: 80px; color: #333; }
        
        /* HEADER FIJO */
        .header { position: fixed; top: 0; left: 0; right: 0; background: #2271b1; color: white; padding: 10px 20px; z-index: 1000; display: flex; justify-content: space-between; align-items: center; box-shadow: 0 2px 5px rgba(0,0,0,0.2); }
        .timer-display { font-size: 1.5rem; font-weight: bold; font-variant-numeric: tabular-nums; }
        .pause-btn { background: #f0ad4e; border: none; padding: 8px 16px; border-radius: 4px; cursor: pointer; font-weight: bold; font-size: 0.9rem; color: #333; }
        .pause-btn:hover { background: #ec971f; }

        /* CONTENEDOR PRINCIPAL */
        .container { max-width: 800px; margin: 80px auto 20px; padding: 0 15px; }
        
        /* TARJETA DE PREGUNTA */
        .question-card { background: white; padding: 20px; border-radius: 8px; box-shadow: 0 2px 4px rgba(0,0,0,0.05); margin-bottom: 20px; border-left: 5px solid #2271b1; }
        .q-text { font-size: 1.1rem; font-weight: 600; margin-bottom: 15px; line-height: 1.4; }
        
        /* OPCIONES */
        .options-group { display: flex; flex-direction: column; gap: 8px; }
        .option-label { display: flex; align-items: center; padding: 10px; border: 1px solid #ddd; border-radius: 6px; cursor: pointer; transition: background 0.2s; }
        .option-label:hover { background-color: #f8f9fa; }
        .option-label input { margin-right: 12px; transform: scale(1.2); }

        /* FEEDBACK VISUAL */
        .correct { background-color: #d4edda !important; border-color: #c3e6cb !important; color: #155724; }
        .wrong { background-color: #f8d7da !important; border-color: #f5c6cb !important; color: #721c24; text-decoration: line-through; }
        .explanation-box { margin-top: 15px; padding: 12px; background: #e2e3e5; border-radius: 6px; font-size: 0.9rem; display: none; border-left: 4px solid #6c757d; }
        
        /* BOTONES DE ACCIÓN */
        .check-btn { margin-top: 15px; background: #2271b1; color: white; border: none; padding: 10px 20px; border-radius: 4px; cursor: pointer; font-size: 1rem; width: 100%; }
        .check-btn:hover { background: #135e96; }
        .check-btn:disabled { background: #ccc; cursor: not-allowed; }

        /* RESULTADOS Y PAUSA */
        #results-modal, #pause-modal { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.85); z-index: 2000; align-items: center; justify-content: center; flex-direction: column; color: white; text-align: center; }
        .modal-content { background: white; color: #333; padding: 30px; border-radius: 10px; max-width: 400px; width: 90%; }
        .btn-restart { background: #28a745; color: white; padding: 15px; border: none; border-radius: 5px; font-size: 1.1rem; cursor: pointer; margin-top: 15px; width: 100%; }

        /* BARRA PROGRESO */
        .progress-bar { position: fixed; top: 60px; left: 0; height: 5px; background: #ddd; width: 100%; z-index: 999; }
        .progress-fill { height: 100%; background: #00a0d2; width: 0%; transition: width 0.3s; }
    </style>
</head>
<body>

    <div id="pause-modal">
        <h1 style="color:white">EXAMEN PAUSADO</h1>
        <button class="pause-btn" onclick="togglePause()" style="font-size:1.2rem; padding:15px 30px;">REANUDAR</button>
    </div>

    <div id="results-modal">
        <div class="modal-content">
            <h2>Examen Finalizado</h2>
            <p>Tu puntuación es:</p>
            <h1 id="final-score" style="font-size: 3rem; margin: 10px 0;">0.0</h1>
            <p id="final-verdict"></p>
            <button class="btn-restart" onclick="location.reload()">GENERAR NUEVO EXAMEN</button>
        </div>
    </div>

    <div class="header">
        <div>WP Examen <span id="q-count" style="font-size:0.8rem; opacity:0.8;">(0/50)</span></div>
        <div style="display:flex; gap:10px; align-items:center;">
            <div class="timer-display" id="timer">45:00</div>
            <button class="pause-btn" onclick="togglePause()">II</button>
        </div>
    </div>
    <div class="progress-bar"><div class="progress-fill" id="progress"></div></div>

    <div class="container" id="quiz-container">
        </div>

    <div style="text-align: center; margin: 20px;">
        <button onclick="finishExam()" style="background:#d63638; color:white; padding:15px 40px; border:none; border-radius:5px; font-size:1.1rem; cursor:pointer;">Terminar Examen Ahora</button>
    </div>

<script>
    // --- BASE DE DATOS DE PREGUNTAS (POOL) ---
    const DB = [
        { q: "¿En qué archivo de WordPress se configuran los datos de conexión a la Base de Datos?", o: ["wp-admin.php", "functions.php", "wp-config.php", "index.php"], a: 2, e: "wp-config.php contiene las constantes DB_NAME, DB_USER, DB_PASSWORD." },
        { q: "¿Qué prefijo de base de datos viene por defecto y se recomienda cambiar por seguridad?", o: ["db_", "wp_", "sql_", "user_"], a: 1, e: "Cambiar 'wp_' evita ataques masivos automatizados a tablas conocidas." },
        { q: "¿Cuál es la estructura de Enlaces Permanentes recomendada para SEO?", o: ["Simple (?p=123)", "Día y nombre", "Numérico", "Nombre de la entrada"], a: 3, e: "Ayuda a Google a entender el contenido y es amigable para el usuario." },
        { q: "¿Qué archivo controla las reglas del servidor Apache y redirecciones?", o: [".htaccess", "robots.txt", "config.php", "xmlrpc.php"], a: 0, e: "Vital para configurar HTTPS forzoso, caché y redirecciones 301." },
        { q: "¿Qué es un Child Theme (Tema Hijo)?", o: ["Un tema para niños", "Una plantilla que hereda funciones del padre para modificar código sin perderlo al actualizar", "Un plugin", "Un widget"], a: 1, e: "Permite personalizar functions.php y style.css de forma segura." },
        { q: "En Elementor, ¿qué diferencia hay entre Margin y Padding?", o: ["Son iguales", "Margin es espacio interno, Padding externo", "Margin es espacio externo (entre elementos), Padding interno (relleno)", "Ninguna"], a: 2, e: "Margin separa cajas; Padding separa el contenido del borde de su caja." },
        { q: "¿Qué rol de usuario tiene acceso total al sistema (plugins, temas, usuarios)?", o: ["Editor", "Administrador", "Autor", "Colaborador"], a: 1, e: "Es el único que puede tocar la configuración técnica del sitio." },
        { q: "¿Qué es el 'Slug'?", o: ["Un virus", "La parte final amigable de la URL", "El dominio", "La base de datos"], a: 1, e: "Ej: midominio.com/contacto ('contacto' es el slug)." },
        { q: "¿Para qué sirve el atributo 'alt' en las imágenes?", o: ["Para que carguen rápido", "Para SEO y accesibilidad (ciegos)", "Para poner borde", "No sirve"], a: 1, e: "Describe la imagen a Google y lectores de pantalla." },
        { q: "¿Qué peso máximo recomendado deberían tener las imágenes (aprox)?", o: ["2 MB", "1 MB", "200 KB", "5 MB"], a: 2, e: "Regla de oro para WPO: mantenerlas lo más ligeras posible (WebP, Squoosh)." },
        { q: "¿Qué es un CPT (Custom Post Type)?", o: ["Un tipo de contenido personalizado (ej: Proyectos)", "Un error", "Un plugin de caché", "Un comentario"], a: 0, e: "Amplía WP más allá de Entradas y Páginas." },
        { q: "¿Qué herramienta usamos para crear un entorno local en el ordenador?", o: ["LocalWP", "Word", "Photoshop", "Drive"], a: 0, e: "Simula un servidor en tu PC para desarrollar sin internet." },
        { q: "¿Qué es el archivo robots.txt?", o: ["Un virus", "Instrucciones para los bots de búsqueda (qué rastrear y qué no)", "Un log de errores", "Un tema"], a: 1, e: "Controla el acceso de las arañas de Google." },
        { q: "¿Qué estado de pedido en WooCommerce indica que se ha pagado y hay que enviar?", o: ["Pendiente de pago", "En espera", "Procesando", "Completado"], a: 2, e: "El dinero ha entrado y el stock se ha reducido." },
        { q: "Para vender un PDF descargable, ¿qué casillas marcas en el producto?", o: ["Virtual y Descargable", "Solo Virtual", "Físico", "Agrupado"], a: 0, e: "Virtual quita el envío, Descargable permite subir el archivo." },
        { q: "¿Qué plugin es el estándar para copias de seguridad mencionado en el curso?", o: ["All-in-One WP Migration", "WooCommerce", "Elementor", "Contact Form 7"], a: 0, e: "Facilita exportar e importar el sitio completo." },
        { q: "Según el RGPD, ¿cómo debe ser el checkbox de privacidad?", o: ["Pre-marcado", "Desmarcado y obligatorio", "Opcional", "Oculto"], a: 1, e: "Requiere acción afirmativa del usuario." },
        { q: "¿Qué es una Zona de Envío en WooCommerce?", o: ["El almacén", "Área geográfica con tarifas específicas", "La dirección del cliente", "Un plugin"], a: 1, e: "Permite diferenciar precios entre Península, Canarias, Europa, etc." },
        { q: "Si la web muestra una pantalla blanca (WSOD), ¿qué suele ser?", o: ["Error de PHP o plugin incompatible", "Fallo de internet", "Virus", "Pantalla rota"], a: 0, e: "Error crítico de ejecución de código." },
        { q: "¿Qué es 'Mobile First'?", o: ["Diseñar primero para móvil", "Comprar un móvil", "Que el móvil es más caro", "Un plugin"], a: 0, e: "Estrategia de diseño priorizando pantallas pequeñas." },
        { q: "¿Qué etiqueta HTML es la más importante para el SEO on-page?", o: ["H1", "H2", "Div", "Span"], a: 0, e: "Define el título principal del contenido." },
        { q: "¿Qué es el Z-Index en Elementor?", o: ["El zoom", "El orden de apilamiento (capas)", "El color", "El margen"], a: 1, e: "Controla qué elemento pasa por encima de otro." },
        { q: "¿Cómo se llama el editor de bloques nativo de WordPress?", o: ["Classic", "Gutenberg", "Divi", "WPBakery"], a: 1, e: "Introducido en la versión 5.0." },
        { q: "¿Qué es el Theme Builder?", o: ["Un constructor de temas (Cabeceras, Pies, Archivos)", "Un plugin de seguridad", "Un hosting", "Un menú"], a: 0, e: "Permite diseñar las partes estructurales de la web." },
        { q: "¿Qué es un 'Blueprint' en LocalWP?", o: ["Un plano azul", "Una plantilla de sitio guardada para reutilizar", "Un error", "Una base de datos"], a: 1, e: "Guarda tu configuración base para nuevos proyectos." },
        { q: "¿Qué hook se ejecuta justo antes del cierre del body?", o: ["wp_head", "wp_footer", "wp_content", "admin_init"], a: 1, e: "Carga scripts JS y la barra de administración." },
        { q: "¿Qué es una 'Breadcrumb'?", o: ["Miga de pan (rastro de navegación)", "Un plugin de comida", "Un error 404", "Un widget"], a: 0, e: "Mejora UX indicando la ruta: Inicio > Tienda > Producto." },
        { q: "¿Qué diferencia hay entre Entradas y Páginas?", o: ["Ninguna", "Entradas = Cronológicas/Dinámicas; Páginas = Estáticas/Jerárquicas", "Páginas son para blog", "Entradas no tienen fecha"], a: 1, e: "Concepto base de la arquitectura de WP." },
        { q: "Si quiero traducir cadenas de texto de un tema, ¿qué plugin uso?", o: ["Loco Translate", "WPML", "Yoast", "Jetpack"], a: 0, e: "Editor de archivos PO/MO integrado." },
        { q: "¿Qué hace la opción 'Disuadir a los motores de búsqueda' en Ajustes?", o: ["Añade noindex a toda la web", "Mejora el SEO", "Borra la web", "Nada"], a: 0, e: "Evita que Google indexe la web mientras está en desarrollo." },
        { q: "¿Qué es un Shortcode?", o: ["Un código corto [ejemplo] para insertar funciones", "Un error", "Una contraseña", "Un enlace"], a: 0, e: "Método clásico para incrustar elementos dinámicos." },
        { q: "¿Qué es el Favicon?", o: ["El logo grande", "El icono en la pestaña del navegador", "El footer", "Un menú"], a: 1, e: "Identidad visual en el navegador." },
        { q: "¿Qué es un Global Widget en Elementor?", o: ["Un widget mundial", "Un elemento que se actualiza en todas partes si lo editas una vez", "Un mapa", "Un error"], a: 1, e: "Útil para CTAs repetitivos." },
        { q: "¿Qué es HTTPS?", o: ["Protocolo seguro (SSL)", "Protocolo lento", "Web antigua", "Dominio"], a: 0, e: "Cifra la conexión entre usuario y servidor." },
        { q: "¿Cuál es la resolución de referencia Desktop estándar?", o: ["1920px", "800px", "4000px", "100px"], a: 0, e: "Ancho Full HD habitual para diseño." },
        { q: "¿Qué es Squoosh?", o: ["Una bebida", "Herramienta online para comprimir imágenes", "Un plugin", "Un tema"], a: 1, e: "Recomendada en el curso para optimizar antes de subir." },
        { q: "¿Qué hace un plugin de Caché?", o: ["Borra archivos", "Guarda versiones estáticas para servir la web más rápido", "Hackea la web", "Traduce"], a: 1, e: "Vital para WPO (velocidad)." },
        { q: "¿Se permite el pago Contrareembolso en el proyecto final?", o: ["No", "Sí", "Solo con tarjeta", "Depende"], a: 1, e: "Es un método válido según los criterios técnicos." },
        { q: "¿Qué es un Loop?", o: ["Un bucle de código que muestra los posts", "Un error infinito", "Un diseño redondo", "Un plugin"], a: 0, e: "El mecanismo principal de WP para listar contenido." },
        { q: "¿Qué es el 'Excerpt'?", o: ["El extracto o resumen del post", "El título", "La imagen", "El autor"], a: 0, e: "Texto introductorio en los listados de blog." },
        { q: "¿Para qué sirve Contact Form 7?", o: ["Crear formularios", "Crear tiendas", "SEO", "Seguridad"], a: 0, e: "Plugin clásico de formularios." },
        { q: "¿Qué es Wordfence?", o: ["Un firewall y escáner de seguridad", "Un editor de texto", "Un tema", "Un hosting"], a: 0, e: "Protege contra ataques de fuerza bruta." },
        { q: "¿Qué es un '404'?", o: ["Página no encontrada", "Éxito", "Servidor caído", "Pago aceptado"], a: 0, e: "El enlace está roto o no existe." },
        { q: "¿Qué hace la etiqueta 'noindex'?", o: ["Dice a Google que no guarde esa página", "Borra la página", "La hace privada", "Mejora el ranking"], a: 0, e: "SEO negativo intencional para páginas irrelevantes." },
        { q: "¿Qué es un Sitemap?", o: ["Un mapa XML con todas las URLs para Google", "Un mapa de imagen", "La dirección de la empresa", "Un menú"], a: 0, e: "Ayuda a la indexación." },
        { q: "¿Qué es un Producto Variable?", o: ["Producto con opciones (Talla, Color)", "Producto que cambia de precio solo", "Producto digital", "Producto externo"], a: 0, e: "Gestiona diferentes SKUs en una ficha." },
        { q: "¿Qué es 'Lazy Load'?", o: ["Carga perezosa (diferida) de imágenes", "Web lenta", "Carga rápida de scripts", "Un error"], a: 0, e: "Las imágenes cargan al hacer scroll." },
        { q: "En Elementor, ¿cómo solucionas solapamiento de cabeceras sticky?", o: ["Con Offset (Desplazamiento)", "Con Margin", "Con Padding", "Borrando una"], a: 0, e: "Desplaza el punto de activación del efecto." },
        { q: "¿Qué documento es obligatorio entregar con el proyecto?", o: ["Memoria PDF", "DNI", "Foto", "Nada"], a: 0, e: "Junto con el backup y las capturas." },
        { q: "¿Cuánto tiempo mínimo de dedicación exige el proyecto?", o: ["40 horas", "10 horas", "100 horas", "1 hora"], a: 0, e: "Equivale a una semana de trabajo." },
        { q: "¿Qué es el Responsive Breakpoint?", o: ["Punto de ruptura (cambio de diseño según ancho)", "Cuando la web se rompe", "Un error", "El footer"], a: 0, e: "Define cuándo cambia el diseño de PC a Tablet." },
        { q: "¿Qué es un Mockup?", o: ["Un montaje visual de cómo quedará la web", "Una copia de seguridad", "Un plugin", "Un código"], a: 0, e: "Fase de diseño previo al desarrollo." },
        { q: "¿Qué es un Hosting?", o: ["Espacio en un servidor para alojar la web", "El dominio", "El diseño", "El navegador"], a: 0, e: "Donde viven los archivos online." },
        { q: "¿Qué es una Landing Page?", o: ["Página de aterrizaje enfocada en conversión", "La home", "El blog", "Página de error"], a: 0, e: "Elimina distracciones para vender o captar." },
        { q: "¿Qué es un CTA?", o: ["Call to Action (Llamada a la acción)", "Un impuesto", "Un plugin", "Un error"], a: 0, e: "Botones tipo 'Comprar ahora' o 'Contactar'." },
        { q: "¿Qué es el 'Alt Text'?", o: ["Texto alternativo imagen", "Texto alto", "Texto oculto", "Título"], a: 0, e: "Accesibilidad y SEO." },
        { q: "¿Qué es un Widget?", o: ["Pequeño bloque de contenido funcional", "Un tema", "Una página", "Un usuario"], a: 0, e: "Ej: Calendario, Últimas entradas, Buscador." },
        { q: "¿Qué archivo CSS tiene prioridad?", o: ["El último cargado (generalmente CSS personalizado)", "El primero", "El del navegador", "Ninguno"], a: 0, e: "Cascada CSS: lo último manda." },
        { q: "¿Qué es una Categoría?", o: ["Forma jerárquica de organizar posts", "Una etiqueta", "Una página", "Un menú"], a: 0, e: "Permite agrupar contenido temático." },
        { q: "¿Qué es una Etiqueta (Tag)?", o: ["Palabra clave no jerárquica para posts", "Una categoría", "Un precio", "Un título"], a: 0, e: "Micro-clasificación de contenido." },
        { q: "¿Qué es el 'Backend'?", o: ["La parte de administración (wp-admin)", "La parte visible", "El diseño", "El usuario"], a: 0, e: "Donde trabaja el administrador." },
        { q: "¿Qué es el 'Frontend'?", o: ["La parte visible para el usuario", "El administrador", "La base de datos", "El servidor"], a: 0, e: "La web tal cual la ve el visitante." },
        { q: "¿Qué es la Biblioteca de Medios?", o: ["Donde se guardan fotos y vídeos", "Un plugin", "Una página", "Un menú"], a: 0, e: "Gestor de archivos de WP." },
        { q: "¿Qué es un iframe?", o: ["Una ventana para incrustar contenido externo (ej: Maps)", "Un marco de foto", "Un plugin", "Un error"], a: 0, e: "HTML para embeber recursos." },
        { q: "¿Qué es el 'Padding'?", o: ["Relleno interno", "Margen externo", "Borde", "Color"], a: 0, e: "Espacio dentro de la caja." },
        { q: "¿Qué es el 'Margin'?", o: ["Espacio externo entre cajas", "Relleno", "Borde", "Color"], a: 0, e: "Separa elementos." },
        { q: "¿Qué es un Dominio?", o: ["El nombre de la web (ej: google.com)", "El servidor", "El hosting", "El diseño"], a: 0, e: "La dirección que escribes en el navegador." },
        { q: "¿Qué es DNS?", o: ["Sistema que traduce dominios a IPs", "Un servidor", "Un plugin", "Un error"], a: 0, e: "La agenda telefónica de internet." },
        { q: "¿Qué es PHP?", o: ["Lenguaje de programación de WordPress", "Un diseño", "Una base de datos", "Un navegador"], a: 0, e: "Lenguaje del lado del servidor." },
        { q: "¿Qué es MySQL?", o: ["El sistema de base de datos de WP", "Un lenguaje", "Un plugin", "Un tema"], a: 0, e: "Donde se guardan los datos (texto, opciones)." }
        // --- BLOQUE 1: "PREGUNTAS DE EXAMEN" DE RAFA (Basado en sus apuntes) ---
        { q: "Según los apuntes de Rafa, ¿en qué archivo exacto se guardan el nombre de la BD, usuario y contraseña?", o: ["wp-content.php", "wp-admin.php", "wp-config.php", "general-settings.php"], a: 2, e: "Rafa lo marca como 'Pregunta de Examen'. Es el archivo de configuración vital." },
        { q: "¿Qué ajuste de Enlaces Permanentes es CRUCIAL para el SEO según vimos en clase?", o: ["Simple (?p=123)", "Nombre de la entrada (Post name)", "Numérico", "Mes y nombre"], a: 1, e: "Es la configuración obligatoria para que Google indexe las URLs amigablemente." },
        { q: "En LocalWP, ¿qué funcionalidad permite guardar una web configurada (plugins+tema) para usarla de plantilla futura?", o: ["Live Link", "One Click Admin", "Blueprints", "Clone Site"], a: 2, e: "Rafa enfatiza esto para ahorrar tiempo en nuevos proyectos." },
        { q: "Si al hacer scroll dos cabeceras sticky se solapan, ¿qué propiedad de Elementor soluciona el problema?", o: ["Z-Index", "Margin-top", "Offset (Desplazamiento)", "Padding"], a: 2, e: "El Offset determina a cuántos píxeles del borde se activa el efecto sticky." },
        { q: "Para cumplir el RGPD, ¿cómo debe estar la casilla de aceptación en un formulario?", o: ["Pre-marcada por defecto", "Desmarcada y requerir acción manual", "Oculta", "Visible pero opcional"], a: 1, e: "Es obligatorio legalmente que el usuario haga una acción afirmativa (clic)." },
        { q: "¿Cuál es la 'Regla de Oro' sobre el peso de las imágenes mencionada en clase?", o: ["Menos de 1 MB", "Menos de 500 KB", "Menos de 200 KB", "No importa si usas Lazy Load"], a: 2, e: "Para asegurar una carga rápida y buena puntuación en PageSpeed." },
        { q: "¿Qué archivo debemos editar para forzar redirecciones 301 y HTTPS a nivel de servidor?", o: [".htaccess", "wp-config.php", "robots.txt", "index.php"], a: 0, e: "Es el archivo de configuración del servidor Apache." },
        { q: "¿Qué medida de seguridad es OBLIGATORIA durante la instalación de WordPress?", o: ["Instalar Wordfence", "Cambiar el prefijo de la base de datos (wp_)", "Usar un tema de pago", "Ocultar el login"], a: 1, e: "Evita ataques automatizados a tablas por defecto como 'wp_users'." },
        { q: "¿Qué tipo de producto de WooCommerce se usa para vender un 'Pack de Vajilla' (Platos + Vasos)?", o: ["Producto Variable", "Producto Agrupado", "Producto Simple", "Producto Externo"], a: 1, e: "Permite mostrar varios productos simples juntos en una misma ficha." },
        { q: "¿Por qué NO aparece la pestaña de 'Impuestos' en WooCommerce recién instalado?", o: ["Es de pago", "Hay que activarla primero en Ajustes > General", "Es un error", "Solo aparece si vendes en físico"], a: 1, e: "WooCommerce oculta opciones complejas hasta que indicas que las necesitas." },

        // --- BLOQUE 2: ELEMENTOR PRO Y MAQUETACIÓN AVANZADA ---
        { q: "En el Theme Builder, ¿cuál es la diferencia entre 'Archive' y 'Loop Item'?", o: ["Son lo mismo", "Archive controla la página de resultados; Loop Item el diseño de cada tarjeta individual", "Archive es para el blog, Loop Item para la tienda", "Loop Item es un widget"], a: 1, e: "El Loop Item diseña la 'fichita' que se repite dentro del Archive." },
        { q: "¿Qué selector CSS usamos en Elementor (Custom CSS) para referirnos al widget actual?", o: [".elementor-widget", "#this", "selector", ".mi-clase"], a: 2, e: "La palabra clave 'selector' facilita aplicar CSS solo a ese elemento sin buscar su ID." },
        { q: "¿Qué valor de Z-Index asegura que un elemento (como un popup o menú) esté encima de todo?", o: ["1", "10", "999 o superior", "-1"], a: 2, e: "Cuanto más alto el índice Z, más cerca del 'ojo' del usuario está el elemento." },
        { q: "Si quieres ocultar una sección solo en Móvil, ¿dónde vas?", o: ["Estilo > Visibilidad", "Avanzado > Adaptabilidad (Responsive)", "Disposición > Ancho", "No se puede"], a: 1, e: "Desde allí puedes activar/desactivar la visibilidad por dispositivo." },
        { q: "¿Qué son los 'Global Colors'?", o: ["Colores de la bandera", "Variables de sistema que cambian el color en toda la web si editas el origen", "Colores de fondo", "Una paleta de Photoshop"], a: 1, e: "Esencial para mantener la coherencia del Sistema de Diseño." },
        { q: "¿Qué hace el widget 'Post Content' en una plantilla de Single Post?", o: ["Muestra el título", "Muestra dinámicamente el contenido escrito en el editor de WordPress (Gutenberg)", "Muestra la fecha", "Muestra comentarios"], a: 1, e: "Es el widget obligatorio para que se vea lo que escribes en la entrada." },
        { q: "¿Cómo se llama la función para ver los cambios anteriores si cometes un error diseñando?", o: ["Control Z", "Historial / Revisiones", "Backup", "Restaurar sistema"], a: 1, e: "Elementor guarda un historial de acciones de la sesión actual." },
        
        // --- BLOQUE 3: WOOCOMMERCE TÉCNICO ---
        { q: "Si vendes un Ebook PDF, ¿qué configuración debe tener el producto?", o: ["Solo Virtual", "Virtual y Descargable", "Solo Descargable", "Simple"], a: 1, e: "Virtual elimina el envío; Descargable habilita la subida del archivo." },
        { q: "¿Qué son los 'Endpoints' en WooCommerce?", o: ["Puntos de finalización de compra", "Las terminaciones de URL para las páginas de 'Mi Cuenta' (ej: /pedidos, /descargas)", "Los botones", "Los precios"], a: 1, e: "Permiten navegar por las secciones del área privada del cliente." },
        { q: "Para crear un producto con Talla S, M y L, primero debes crear...", o: ["Las variaciones", "Los atributos", "El precio", "La foto"], a: 1, e: "Primero defines el Atributo (Talla) y sus términos, luego generas las Variaciones." },
        { q: "¿Qué plugin recomienda Rafa para mejorar visualmente los selectores de variaciones?", o: ["WooCommerce Colors", "Variation Swatches", "Elementor Pro", "JetEngine"], a: 1, e: "Convierte los desplegables feos en botones de colores o etiquetas." },
        { q: "¿Es obligatorio configurar Stripe/Redsys para aprobar el proyecto?", o: ["Sí, 100%", "No, se permiten métodos como Transferencia o Contrareembolso", "Sí, pero en modo test", "No hace falta método de pago"], a: 1, e: "Según criterios, basta con que el proceso de compra se complete, no que se cobre real." },
        
        // --- BLOQUE 4: WORDPRESS CORE & ARCHIVOS ---
        { q: "¿Qué ocurre si actualizas un tema Padre sin tener un tema Hijo?", o: ["Nada malo", "Mejoras la velocidad", "Pierdes todas las modificaciones de código (CSS/PHP) hechas en los archivos del tema", "Se rompe la base de datos"], a: 2, e: "Por eso el Child Theme es obligatorio si tocas código." },
        { q: "¿Qué es el 'Slug'?", o: ["Un bicho", "La parte amigable de la URL que identifica el recurso (ej: /contacto)", "El dominio", "El título"], a: 1, e: "Debe ser único y descriptivo para el SEO." },
        { q: "¿Dónde se gestionan los menús por defecto?", o: ["Ajustes > Menús", "Apariencia > Menús", "Herramientas > Menús", "Plugins"], a: 1, e: "Ubicación estándar del core de WordPress." },
        { q: "¿Qué diferencia hay entre una Página y una Entrada?", o: ["Ninguna", "Páginas = Estáticas/Jerárquicas; Entradas = Cronológicas/Taxonomías", "Páginas para móvil, Entradas para PC", "Entradas no tienen autor"], a: 1, e: "Concepto base de la arquitectura de información de WP." },
        { q: "¿Qué es un CPT (Custom Post Type)?", o: ["Un post normal", "Un tipo de contenido personalizado (ej: Proyecto, Receta) diferente a entradas/páginas", "Un plugin", "Un usuario"], a: 1, e: "Necesario para el portfolio o catálogos complejos." },
        { q: "¿Qué hace la función 'Disuadir a los motores de búsqueda'?", o: ["Bloquea hackers", "Añade una etiqueta 'noindex' para que Google ignore la web", "Borra la web", "Mejora el SEO"], a: 1, e: "Se usa solo durante el desarrollo para no indexar webs a medio hacer." },
        { q: "¿Qué es el 'Pantallazo Blanco de la Muerte' (WSOD)?", o: ["Se rompió el monitor", "Error crítico de PHP o memoria que impide cargar la interfaz", "Virus", "Modo oscuro"], a: 1, e: "Suele requerir acceso FTP para desactivar el plugin conflictivo." },
        
        // --- BLOQUE 5: IMÁGENES Y WPO (Optimización) ---
        { q: "¿Qué es Squoosh?", o: ["Un juego", "Herramienta de Google para comprimir imágenes manualmente antes de subir", "Un plugin de caché", "Un tema"], a: 1, e: "Recomendada en el curso para limpiar imágenes." },
        { q: "¿Para qué sirve el atributo ALT en una imagen?", o: ["Es el título", "Para accesibilidad (ciegos) y SEO (Google entiende la foto)", "Para descargarla", "Para el borde"], a: 1, e: "Si no lo pones, penalizas en SEO y accesibilidad." },
        { q: "¿Qué formato de imagen de nueva generación recomienda Google?", o: ["BMP", "TIFF", "WebP", "GIF"], a: 2, e: "Pesa mucho menos que JPG/PNG con la misma calidad." },
        { q: "¿Qué es 'Lazy Load'?", o: ["Carga perezosa: las imágenes cargan solo cuando el usuario hace scroll hacia ellas", "Web lenta", "Carga inmediata", "Un error"], a: 0, e: "Mejora drásticamente la velocidad inicial de la web." },
        { q: "¿Qué plugin de caché se menciona como opción Premium en el manual?", o: ["W3 Total Cache", "WP Rocket", "Autoptimize", "Super Cache"], a: 1, e: "Es el estándar de pago para WPO." },
        
        // --- BLOQUE 6: SEGURIDAD Y LEGALIDAD ---
        { q: "¿Qué es un ataque de fuerza bruta?", o: ["Golpear el servidor", "Intentos masivos automatizados de adivinar usuario y contraseña", "Un virus SQL", "Spam"], a: 1, e: "Se mitiga limitando los intentos de login." },
        { q: "Para cambiar la URL de acceso (/wp-admin), ¿qué plugin usamos?", o: ["WooCommerce", "WPS Hide Login (o similar)", "Elementor", "Contact Form 7"], a: 1, e: "Seguridad por oscuridad: ocultar la puerta reduce ataques." },
        { q: "¿Qué es el archivo robots.txt?", o: ["Un virus", "Archivo que indica a los bots qué partes de la web pueden rastrear", "El mapa del sitio", "Configuración de estilo"], a: 1, e: "Controla el presupuesto de rastreo de Google." },
        { q: "¿Qué documento legal es obligatorio tener visible en el pie de página?", o: ["Política de Privacidad", "El CV", "La foto del CEO", "Instagram"], a: 0, e: "Requisito legal indispensable." },
        { q: "¿Qué hace un plugin de Backup como All-in-One WP Migration?", o: ["Limpia virus", "Empaqueta base de datos y archivos en un solo fichero para restaurar", "Traduce", "Optimiza CSS"], a: 1, e: "Vital para no perder el trabajo antes de tocar cosas peligrosas." },

        // --- BLOQUE 7: PREGUNTAS TRAMPA / DETALLES TÉCNICOS ---
        { q: "¿Qué rol de usuario puede editar sus posts pero NO publicar sin aprobación?", o: ["Autor", "Colaborador", "Editor", "Suscriptor"], a: 1, e: "El Colaborador escribe, pero requiere que un Editor/Admin apruebe." },
        { q: "¿Qué rol de usuario puede gestionar los contenidos de todos los demás pero NO tocar plugins?", o: ["Admin", "Editor", "Autor", "Colaborador"], a: 1, e: "El Editor es el jefe de contenidos, no el jefe técnico." },
        { q: "¿Qué es un Shortcode?", o: ["Un código corto entre corchetes [ ]", "Un error PHP", "Un enlace", "Una contraseña"], a: 0, e: "Ej: [contact-form-7] invoca una funcionalidad compleja." },
        { q: "¿Qué hook se usa para inyectar código (como Analytics) en la cabecera?", o: ["wp_footer", "wp_head", "the_content", "admin_init"], a: 1, e: "Se coloca justo antes del cierre de </head>." },
        { q: "¿Qué tabla de la BD guarda la URL del sitio (siteurl)?", o: ["wp_posts", "wp_users", "wp_options", "wp_terms"], a: 2, e: "Tabla crítica para la configuración global." },
        { q: "¿Qué es una 'Miga de pan' (Breadcrumb)?", o: ["Comida", "Rastro de navegación (Inicio > Tienda > Producto)", "Un menú footer", "Un widget"], a: 1, e: "Mejora la UX y el enlazado interno SEO." },
        { q: "Si la web da error 404 en todas las páginas internas salvo la Home, ¿qué haces?", o: ["Reinstalar WordPress", "Ir a Enlaces Permanentes y guardar cambios", "Borrar el tema", "Cambiar de hosting"], a: 1, e: "Al guardar, se regenera el archivo .htaccess solucionando el error." },
        { q: "¿Qué es un Favicon?", o: ["El logo grande", "El icono pequeño en la pestaña del navegador", "El footer", "Un botón"], a: 1, e: "Identidad de marca." },
        { q: "¿Qué es un Tema Padre?", o: ["Un tema viejo", "Un tema completo del que hereda un tema hijo", "Un plugin", "Una página"], a: 1, e: "Contiene todos los archivos de plantilla originales." },
        { q: "¿Qué significa 'Responsive Breakpoint'?", o: ["Cuando la web se rompe", "El ancho en píxeles donde el diseño cambia (ej: de PC a Tablet)", "Un error", "El menú"], a: 1, e: "Punto de corte para las media queries CSS." },

        // --- BLOQUE 8: MÁS CONCEPTOS DE LOS MANUALES ---
        { q: "¿Qué es un Widget en WordPress clásico?", o: ["Una página", "Un bloque de contenido funcional para áreas específicas (sidebar/footer)", "Un plugin", "Un post"], a: 1, e: "Pequeños módulos como 'Buscar', 'Categorías', 'HTML personalizado'." },
        { q: "¿Qué diferencia hay entre Categorías y Etiquetas?", o: ["Ninguna", "Categorías son jerárquicas (padre/hijo), Etiquetas no", "Etiquetas son obligatorias", "Categorías son para páginas"], a: 1, e: "Las categorías estructuran, las etiquetas describen detalles." },
        { q: "¿Qué es el 'Excerpt'?", o: ["El extracto o resumen manual de una entrada", "El título", "La foto destacada", "El autor"], a: 0, e: "Se muestra en los listados de blog en lugar del texto completo." },
        { q: "¿Para qué sirve el plugin 'Loco Translate'?", o: ["Traducir la web al chino automáticamente", "Traducir cadenas internas de temas/plugins (.po/.mo)", "Mover la web", "Seguridad"], a: 1, e: "Para cambiar 'Read more' por 'Leer más'." },
        { q: "¿Qué es un Mockup?", o: ["Un diseño visual estático previo al desarrollo", "Una copia de seguridad", "Un virus", "Un código"], a: 0, e: "Fase de diseño UX/UI." },
        { q: "¿Qué es el 'CMS'?", o: ["Código Muy Seguro", "Content Management System (Gestor de Contenidos)", "Cascading Style", "Cliente"], a: 1, e: "WordPress es un CMS." },
        { q: "¿Qué es el 'Backend'?", o: ["La parte visible", "El panel de administración", "El diseño", "El usuario"], a: 1, e: "Donde trabaja el administrador." },
        { q: "¿Qué es el 'Frontend'?", o: ["El panel de control", "La parte pública que ve el visitante", "La base de datos", "El servidor"], a: 1, e: "El resultado final renderizado." },
        { q: "Si usas un constructor visual, ¿puedes desactivarlo y mantener el diseño intacto?", o: ["Sí, siempre", "No, suele dejar 'shortcodes' basura o perder el estilo", "Sí, WP lo guarda", "Depende del hosting"], a: 1, e: "Lock-in effect: quedas atado al plugin (Elementor/Divi)." },
        { q: "¿Qué es un iframe?", o: ["Un marco para incrustar contenido externo (YouTube/Maps)", "Una imagen", "Un plugin", "Un error"], a: 0, e: "Etiqueta HTML estándar." },
        { q: "¿Qué es el 'Alt Text'?", o: ["Texto alternativo", "Texto alto", "Texto oculto", "Título"], a: 0, e: "SEO y Accesibilidad." },
        { q: "¿Qué es 'HTTPS'?", o: ["Protocolo Seguro (SSL)", "Web lenta", "Web antigua", "Dominio"], a: 0, e: "Cifrado de datos." },
        { q: "¿Qué es 'DNS'?", o: ["Sistema de Nombres de Dominio (traduce dominio a IP)", "Un servidor", "Un plugin", "Un error"], a: 0, e: "La agenda de internet." },
        { q: "¿Qué es 'PHP'?", o: ["Lenguaje del lado del servidor de WP", "Diseño", "Base de datos", "Navegador"], a: 0, e: "El motor lógico de WordPress." },
        { q: "¿Qué es 'MySQL'?", o: ["La base de datos", "El lenguaje", "El plugin", "El tema"], a: 0, e: "Donde se guardan los datos." },
        { q: "¿Qué es el 'Padding'?", o: ["Relleno interno", "Margen externo", "Borde", "Sombra"], a: 0, e: "Espacio dentro de la caja." },
        { q: "¿Qué es el 'Margin'?", o: ["Espacio externo", "Relleno", "Borde", "Color"], a: 0, e: "Separación entre cajas." },
        { q: "¿Qué es un 'Landing Page'?", o: ["Página de aterrizaje para conversión", "La home", "El blog", "Contacto"], a: 0, e: "Objetivo único: convertir." },
        { q: "¿Qué es un 'CTA'?", o: ["Call to Action (Llamada a la acción)", "Centro técnico", "Contacto", "Código"], a: 0, e: "Botón para que el usuario haga algo." },
        { q: "¿Qué es la Biblioteca de Medios?", o: ["Donde están las fotos", "Un plugin", "Una página", "Un menú"], a: 0, e: "Gestión de archivos." },
        { q: "¿Qué es un 'User Role'?", o: ["Permisos de usuario", "Un plugin", "Un tema", "Un post"], a: 0, e: "Define qué puede hacer cada quién." },
        { q: "¿Qué es el 'Sidebar'?", o: ["Barra lateral", "Pie de página", "Cabecera", "Menú"], a: 0, e: "Área de widgets clásica." },
        { q: "¿Qué es 'Gutenberg'?", o: ["Editor de bloques", "Un tema", "Un plugin", "Un hosting"], a: 0, e: "El editor actual de WP." },
        { q: "¿Qué es un 'Plugin'?", o: ["Software que añade funcionalidad extra", "Un diseño", "Un texto", "Una foto"], a: 0, e: "Apps para tu WordPress." },
        { q: "¿Qué es un 'Theme'?", o: ["La capa visual/diseño", "La base de datos", "El contenido", "El servidor"], a: 0, e: "Controla la apariencia." }
    ];

    // VARIABLES DE ESTADO
    let questions = []; // Las 50 seleccionadas
    let userAnswers = {};
    let timer;
    let timeLeft = 45 * 60; // 45 min
    let isPaused = false;

    // INICIALIZACIÓN
    function init() {
        // 1. Barajar y coger 50
        questions = DB.sort(() => 0.5 - Math.random()).slice(0, 50);
        
        // 2. Renderizar
        const container = document.getElementById('quiz-container');
        container.innerHTML = ""; // Limpiar
        
        questions.forEach((q, index) => {
            // Crear HTML de la pregunta
            let html = `
                <div class="question-card" id="card-${index}">
                    <div class="q-text">${index + 1}. ${q.q}</div>
                    <div class="options-group">
            `;
            
            // Barajar opciones visualmente pero manteniendo índice correcto
            // Truco: Mapeamos indices originales
            let indices = q.o.map((_, i) => i); // [0, 1, 2, 3]
            // Si quieres barajar opciones descomenta la siguiente línea:
            // indices.sort(() => 0.5 - Math.random());

            indices.forEach(i => {
                html += `
                    <label class="option-label" id="lbl-${index}-${i}">
                        <input type="radio" name="q_${index}" value="${i}">
                        ${q.o[i]}
                    </label>
                `;
            });

            html += `
                    </div>
                    <button class="check-btn" onclick="check(${index})">Comprobar</button>
                    <div class="explanation-box" id="exp-${index}"></div>
                </div>
            `;
            container.innerHTML += html;
        });

        // 3. Iniciar Timer
        startTimer();
    }

    // LOGICA DE COMPROBACIÓN INDIVIDUAL
    window.check = function(index) {
        const selected = document.querySelector(`input[name="q_${index}"]:checked`);
        if (!selected) return alert("Selecciona una respuesta primero.");

        const val = parseInt(selected.value);
        const correct = questions[index].a;
        const card = document.getElementById(`card-${index}`);
        const btn = card.querySelector('.check-btn');
        const expBox = document.getElementById(`exp-${index}`);
        
        // Guardar respuesta
        userAnswers[index] = (val === correct);

        // Bloquear inputs
        const inputs = card.querySelectorAll('input');
        inputs.forEach(inp => inp.disabled = true);
        btn.disabled = true;
        btn.textContent = "Revisado";

        // Estilos
        if (val === correct) {
            document.getElementById(`lbl-${index}-${val}`).classList.add('correct');
            expBox.innerHTML = `<strong>¡CORRECTO!</strong><br>${questions[index].e}`;
            expBox.style.borderLeftColor = "#28a745";
        } else {
            document.getElementById(`lbl-${index}-${val}`).classList.add('wrong');
            document.getElementById(`lbl-${index}-${correct}`).classList.add('correct');
            expBox.innerHTML = `<strong>INCORRECTO.</strong><br>La respuesta correcta era la marcada en verde.<br><em>${questions[index].e}</em>`;
            expBox.style.borderLeftColor = "#dc3545";
        }
        expBox.style.display = "block";
        
        updateProgress();
    };

    // TIMER
    function startTimer() {
        timer = setInterval(() => {
            if(!isPaused) {
                timeLeft--;
                let m = Math.floor(timeLeft / 60);
                let s = timeLeft % 60;
                document.getElementById('timer').innerText = `${m}:${s < 10 ? '0'+s : s}`;
                
                if(timeLeft <= 0) finishExam();
            }
        }, 1000);
    }

    window.togglePause = function() {
        isPaused = !isPaused;
        document.getElementById('pause-modal').style.display = isPaused ? 'flex' : 'none';
    };

    function updateProgress() {
        const total = 50;
        const current = Object.keys(userAnswers).length;
        document.getElementById('q-count').innerText = `(${current}/${total})`;
        document.getElementById('progress').style.width = `${(current/total)*100}%`;
    }

    window.finishExam = function() {
        clearInterval(timer);
        const score = Object.values(userAnswers).filter(v => v === true).length;
        const note = (score / 50) * 10;
        
        document.getElementById('final-score').innerText = note.toFixed(1);
        const verdict = document.getElementById('final-verdict');
        
        if(note >= 5) {
            verdict.innerHTML = "<strong style='color:green'>¡APROBADO!</strong><br>Buen trabajo.";
        } else {
            verdict.innerHTML = "<strong style='color:red'>SUSPENSO</strong><br>Repasa el temario.";
        }
        
        document.getElementById('results-modal').style.display = 'flex';
    };

    // ARRANCAR
    init();

</script>
</body>
</html>