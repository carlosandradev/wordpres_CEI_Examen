<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Simulador WordPress CEI - Versi√≥n Final Pro</title>
    <style>
        :root { --primary: #2271b1; --success: #00a32a; --error: #d63638; --bg: #f0f0f1; }
        body { font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif; background-color: var(--bg); color: #3c434a; margin: 0; padding-bottom: 100px; }
        
        /* HEADER FIJO */
        .header { position: fixed; top: 0; left: 0; right: 0; background: #fff; border-bottom: 1px solid #c3c4c7; padding: 10px 20px; z-index: 1000; display: flex; justify-content: space-between; align-items: center; box-shadow: 0 1px 3px rgba(0,0,0,0.05); }
        .logo { font-weight: 700; color: var(--primary); font-size: 1.2rem; }
        .timer-box { font-variant-numeric: tabular-nums; font-size: 1.5rem; font-weight: 600; color: #1d2327; }
        .pause-btn { background: #f6f7f7; border: 1px solid #2271b1; color: #2271b1; padding: 5px 15px; cursor: pointer; border-radius: 3px; font-weight: 600; transition: 0.2s; }
        .pause-btn:hover { background: #f0f0f1; }

        /* CONTENEDOR */
        .container { max-width: 800px; margin: 80px auto 20px; padding: 0 15px; }

        /* TARJETAS DE PREGUNTA */
        .card { background: #fff; border: 1px solid #c3c4c7; padding: 20px; margin-bottom: 20px; border-left: 4px solid var(--primary); box-shadow: 0 1px 2px rgba(0,0,0,0.05); position: relative; }
        .q-text { font-size: 1.1rem; font-weight: 600; margin-bottom: 15px; line-height: 1.4; }
        
        .option-label { display: flex; align-items: flex-start; gap: 10px; padding: 10px; border: 1px solid #dcdcde; border-radius: 4px; cursor: pointer; transition: all 0.2s; margin-bottom: 8px; }
        .option-label:hover { background: #f6f7f7; border-color: var(--primary); }
        .option-label input { margin-top: 4px; transform: scale(1.2); cursor: pointer; }

        /* ESTADOS DE RESPUESTA */
        .option-label.correct { background: #edfaef; border-color: var(--success); color: #005c1e; }
        .option-label.wrong { background: #fcf0f1; border-color: var(--error); color: #8a2424; text-decoration: line-through; }
        .explanation-box { display: none; margin-top: 15px; padding: 12px; background: #f0f0f1; border-left: 4px solid #72aee6; font-size: 0.95rem; }
        
        /* BOTONES */
        .check-btn { background: var(--primary); color: white; border: none; padding: 8px 16px; border-radius: 3px; cursor: pointer; font-size: 0.9rem; margin-top: 10px; }
        .check-btn:hover { background: #135e96; }
        .check-btn:disabled { background: #a7aaad; cursor: default; }

        .fab-finish { position: fixed; bottom: 20px; right: 20px; background: var(--error); color: white; padding: 15px 30px; border-radius: 50px; border: none; font-size: 1.1rem; font-weight: bold; cursor: pointer; box-shadow: 0 4px 10px rgba(0,0,0,0.2); z-index: 999; transition: transform 0.2s; }
        .fab-finish:hover { transform: scale(1.05); background: #b32d2e; }

        /* MODALES */
        .modal { display: none; position: fixed; inset: 0; background: rgba(0,0,0,0.85); z-index: 2000; justify-content: center; align-items: center; flex-direction: column; color: white; text-align: center; }
        .modal-content { background: white; color: #333; padding: 40px; border-radius: 8px; max-width: 500px; width: 90%; text-align: center; }
        .score-big { font-size: 4rem; font-weight: 800; margin: 10px 0; color: var(--primary); }
        .btn-restart { background: var(--success); color: white; border: none; padding: 15px 30px; font-size: 1.2rem; cursor: pointer; border-radius: 5px; width: 100%; margin-top: 20px; }
        
        /* BARRA PROGRESO */
        .progress-bar { position: fixed; top: 60px; left: 0; height: 5px; background: #ddd; width: 100%; z-index: 999; }
        .progress-fill { height: 100%; background: #00a0d2; width: 0%; transition: width 0.3s; }
    </style>
</head>
<body>

    <div id="pause-modal" class="modal">
        <h1>EXAMEN PAUSADO</h1>
        <button class="pause-btn" onclick="togglePause()" style="font-size:1.5rem; padding: 20px 40px; background:white; border:none;">REANUDAR</button>
    </div>

    <div id="results-modal" class="modal">
        <div class="modal-content">
            <h2>Resultado Final</h2>
            <div id="score-display" class="score-big">0.0</div>
            <p id="score-msg" style="font-size: 1.2rem;"></p>
            <div style="text-align:left; margin-top:20px; background:#f0f0f1; padding:15px; border-radius:5px;">
                <p>‚úÖ Aciertos: <span id="res-correct">0</span></p>
                <p>‚ùå Fallos: <span id="res-wrong">0</span></p>
                <p>‚ö™ Sin responder: <span id="res-blank">0</span></p>
            </div>
            <button class="btn-restart" onclick="location.reload()">GENERAR NUEVO EXAMEN</button>
        </div>
    </div>

    <header class="header">
        <div class="logo">Examen WP (50 Preguntas)</div>
        <div style="display: flex; gap: 15px; align-items: center;">
            <div class="timer-box" id="timer">45:00</div>
            <button class="pause-btn" onclick="togglePause()">II PAUSA</button>
        </div>
    </header>
    <div class="progress-bar"><div class="progress-fill" id="progress"></div></div>

    <div class="container" id="quiz-container"></div>

    <button class="fab-finish" onclick="finishExam()">FINALIZAR Y CORREGIR TODO</button>

<script>
    // --- BASE DE DATOS CORREGIDA (120 PREGUNTAS) ---
    const DB = [
        // --- BLOQUE 1: CONCEPTOS B√ÅSICOS DE WORDPRESS (Nivel Est√°ndar) ---
        { q: "¬øCu√°l es la diferencia principal entre Entradas (Posts) y P√°ginas?", o: ["No hay diferencia", "Las Entradas son cronol√≥gicas (noticias/blog) y las P√°ginas son est√°ticas (Contacto/Qui√©nes somos)", "Las P√°ginas no pueden llevar im√°genes", "Las Entradas son para la tienda"], a: 1, e: "Es la distinci√≥n fundamental de la estructura de contenido en WordPress." },
        { q: "¬øQu√© es un 'Plugin'?", o: ["Un dise√±o visual", "Un software que se instala para a√±adir nuevas funcionalidades a WordPress", "Un virus", "Una base de datos"], a: 1, e: "Funcionan como 'apps' que instalas en tu m√≥vil para hacer cosas nuevas." },
        { q: "¬øQu√© es un 'Tema' (Theme)?", o: ["La parte visual que controla el dise√±o y la apariencia de la web", "El panel de administraci√≥n", "Un tipo de post", "El servidor"], a: 0, e: "Es la 'ropa' de tu web; define colores, tipograf√≠as y disposici√≥n visual." },
        { q: "¬øQu√© es la Biblioteca de Medios?", o: ["Donde se guardan los plugins", "El lugar donde se almacenan y gestionan im√°genes, v√≠deos y documentos", "Un men√∫ de ayuda", "La papelera"], a: 1, e: "Todo archivo subido a la web vive aqu√≠." },
        { q: "¬øQu√© es un 'Widget' en WordPress cl√°sico?", o: ["Una p√°gina", "Un bloque de contenido funcional (ej: buscador, lista de categor√≠as) que se pone en barras laterales o pies de p√°gina", "Un usuario", "Un error"], a: 1, e: "Elementos modulares para zonas espec√≠ficas del tema." },
        { q: "¬øPara qu√© sirve la opci√≥n 'Disuadir a los motores de b√∫squeda' en Ajustes > Lectura?", o: ["Para mejorar el SEO", "Para pedir a Google que NO indexe la web (√∫til mientras la est√°s construyendo)", "Para borrar la web", "Para que cargue m√°s r√°pido"], a: 1, e: "A√±ade una etiqueta 'noindex' para que la web no salga en Google antes de tiempo." },
        { q: "¬øQu√© rol de usuario tiene control total sobre la web (plugins, temas, usuarios)?", o: ["Editor", "Autor", "Administrador", "Suscriptor"], a: 2, e: "Es el 'superusuario' con acceso a todo." },
        { q: "¬øQu√© rol puede publicar y editar sus propias entradas, pero no las de otros?", o: ["Colaborador", "Autor", "Editor", "Administrador"], a: 1, e: "El Autor tiene autonom√≠a sobre su contenido, pero no sobre el de los dem√°s." },
        { q: "¬øQu√© es el 'Slug' de una URL?", o: ["Un virus", "La parte final amigable de la direcci√≥n web que identifica una p√°gina (ej: /contacto)", "El dominio", "El protocolo"], a: 1, e: "Debe ser corto, descriptivo y en min√∫sculas para el SEO." },
        { q: "¬øCu√°l es la estructura de Enlaces Permanentes recomendada?", o: ["Simple (?p=123)", "Nombre de la entrada (Post name)", "Num√©rico", "D√≠a y nombre"], a: 1, e: "Genera URLs limpias tipo 'miweb.com/mi-articulo', lo mejor para SEO y usuarios." },

        // --- BLOQUE 2: ELEMENTOR Y DISE√ëO (Nivel Usuario Avanzado) ---
        { q: "¬øQu√© diferencia hay entre Margin (Margen) y Padding (Relleno)?", o: ["Son lo mismo", "El Margin es espacio interno y el Padding externo", "El Margin separa elementos entre s√≠ (fuera de la caja) y el Padding genera espacio dentro de la caja", "Solo sirven para texto"], a: 2, e: "Margin = Espacio fuera del borde. Padding = Espacio dentro del borde." },
        { q: "¬øPara qu√© sirve el 'Navigator' (Navegador) en Elementor?", o: ["Para navegar por internet", "Es un panel de capas para ver y seleccionar la estructura de secciones y columnas", "Es el mapa", "Es la vista previa"], a: 1, e: "Vital para encontrar elementos ocultos o superpuestos." },
        { q: "¬øQu√© es el 'Modo Responsive' en Elementor?", o: ["Un modo r√°pido", "La herramienta para previsualizar y editar c√≥mo queda la web en M√≥vil y Tablet", "Un plugin", "Un error"], a: 1, e: "Permite ajustar tama√±os de letra y m√°rgenes espec√≠ficos para cada dispositivo." },
        { q: "Si quieres que una secci√≥n ocupe toda la altura de la pantalla, ¬øqu√© ajuste usas?", o: ["Ancho completo", "Alto M√≠nimo: 100 VH (Viewport Height)", "Padding 500px", "Margin auto"], a: 1, e: "100 VH significa el 100% de la altura visible del monitor." },
        { q: "¬øQu√© es un 'Global Color' (Color Global)?", o: ["Un color que se ve en todo el mundo", "Una variable que, si la cambias en los ajustes del sitio, actualiza ese color en toda la web a la vez", "Un fondo de pantalla", "Un error"], a: 1, e: "Ahorra mucho tiempo si el cliente decide cambiar el tono de azul corporativo." },
        { q: "¬øPara qu√© sirve el Z-Index?", o: ["Para hacer zoom", "Controla el orden de apilamiento: qu√© elemento se ve encima de otro", "Para el color", "Para el borde"], a: 1, e: "Un n√∫mero mayor pone el elemento m√°s 'arriba' (m√°s cerca de tus ojos)." },
        { q: "En Elementor Pro, ¬øqu√© es el Theme Builder?", o: ["Un constructor de temas", "El panel para dise√±ar las partes estructurales: Cabecera, Pie de p√°gina, Error 404, Archivos...", "Un plugin de seguridad", "Una galer√≠a"], a: 1, e: "Permite salir del contenido y dise√±ar el marco de la web." },
        { q: "¬øC√≥mo solucionas que dos cabeceras pegajosas (sticky) se monten una encima de otra?", o: ["Borrando una", "Usando la opci√≥n 'Offset' (Desplazamiento) en Efectos de Movimiento", "Con margen negativo", "No se puede"], a: 1, e: "El Offset le dice a la segunda cabecera cu√°ndo empezar a pegarse." },
        { q: "¬øQu√© es un 'Plantilla de Loop' (Loop Item)?", o: ["Un error infinito", "El dise√±o de una tarjeta individual (ej: un post) que luego se repite en una rejilla", "Un men√∫", "Un formulario"], a: 1, e: "Dise√±as una sola tarjeta y Elementor la usa para mostrar todos tus posts." },
        { q: "Si un cambio de dise√±o no se ve en la web p√∫blica pero s√≠ en el editor, ¬øqu√© debes hacer?", o: ["Reinstalar WordPress", "Borrar la cach√© (del plugin de cach√© o navegador) y Regenerar CSS en Elementor > Herramientas", "Cambiar de tema", "Esperar un d√≠a"], a: 1, e: "Suele ser un problema de cach√© o de archivos CSS antiguos guardados." },

        // --- BLOQUE 3: WOOCOMMERCE (Tienda Online) ---
        { q: "Para vender una camiseta con tallas (S, M, L), ¬øqu√© tipo de producto usas?", o: ["Producto Simple", "Producto Variable", "Producto Externo", "Producto Virtual"], a: 1, e: "Permite crear variaciones donde cada talla puede tener su propio stock." },
        { q: "Para vender un Ebook PDF que se env√≠a por email, ¬øqu√© marcas?", o: ["Virtual y Descargable", "Solo Virtual", "F√≠sico", "Agrupado"], a: 0, e: "Virtual quita el env√≠o f√≠sico; Descargable habilita subir el archivo." },
        { q: "¬øQu√© es un 'Producto Agrupado'?", o: ["Un pack indivisible", "Una ficha que agrupa varios productos simples (ej: Vajilla = platos + vasos) que se pueden a√±adir por separado", "Un producto variable", "Un descuento"], a: 1, e: "Sirve para mostrar colecciones en una sola p√°gina." },
        { q: "¬øD√≥nde ves los pedidos que han hecho los clientes?", o: ["En Entradas", "En WooCommerce > Pedidos", "En Ajustes", "En Productos"], a: 1, e: "El panel de gesti√≥n de ventas." },
        { q: "¬øQu√© estado de pedido significa que el cliente ha pagado correctamente?", o: ["Pendiente de pago", "En espera", "Procesando", "Cancelado"], a: 2, e: "Procesando indica cobro exitoso y stock descontado." },
        { q: "Si quieres vender productos de Amazon ganando comisi√≥n, ¬øqu√© tipo usas?", o: ["Producto Simple", "Producto Externo/Afiliado", "Producto Variable", "Producto Agrupado"], a: 1, e: "El bot√≥n de compra lleva a la web externa en lugar de al carrito." },
        { q: "¬øPor qu√© no sale la pesta√±a de Impuestos en WooCommerce al principio?", o: ["Es de pago", "Hay que activarla primero en WooCommerce > Ajustes > General", "Es un error", "Solo para Espa√±a"], a: 1, e: "Viene desactivada por defecto para simplificar." },
        { q: "¬øQu√© es una Zona de Env√≠o?", o: ["El almac√©n", "Un √°rea geogr√°fica (ej: Pen√≠nsula) donde defines precios de env√≠o espec√≠ficos", "La direcci√≥n del cliente", "Un plugin"], a: 1, e: "Permite cobrar 5‚Ç¨ a Madrid y 15‚Ç¨ a Canarias." },
        { q: "¬øQu√© m√©todo de pago se permite en el proyecto para simular compras?", o: ["Bitcoin", "Transferencia bancaria o Contrareembolso", "Solo tarjeta real", "No hace falta pago"], a: 1, e: "No hace falta conectar un banco real, basta con simular el flujo." },
        { q: "Para mejorar los desplegables de tallas y colores, ¬øqu√© tipo de plugin usamos?", o: ["Variation Swatches", "Contact Form 7", "Yoast", "Jetpack"], a: 0, e: "Convierte los men√∫s feos en botones de colores o etiquetas." },

        // --- BLOQUE 4: T√âCNICO & RAFA ARJONILLA (Lo espec√≠fico del curso) ---
        { q: "¬øEn qu√© archivo se guardan los datos de conexi√≥n a la Base de Datos?", o: ["index.php", "wp-admin.php", "wp-config.php", "style.css"], a: 2, e: "Es el archivo m√°s importante de la configuraci√≥n inicial." },
        { q: "¬øQu√© es 'LocalWP'?", o: ["Un plugin", "Un programa para crear webs en tu ordenador (local) sin internet", "Un hosting", "Un tema"], a: 1, e: "Herramienta fundamental del curso para desarrollo." },
        { q: "En LocalWP, ¬øqu√© es un 'Blueprint'?", o: ["Un plano azul", "Una plantilla de sitio guardada con tus plugins/tema favoritos para reutilizar", "Un error", "Una base de datos"], a: 1, e: "Rafa recomienda usarlo para no empezar de cero cada vez." },
        { q: "¬øQu√© archivo maneja las redirecciones del servidor y es clave para el HTTPS?", o: [".htaccess", "robots.txt", "config.php", "index.html"], a: 0, e: "Archivo oculto de configuraci√≥n del servidor Apache." },
        { q: "¬øQu√© prefijo de tablas de base de datos viene por defecto y se debe cambiar?", o: ["db_", "wp_", "sql_", "user_"], a: 1, e: "Cambiar 'wp_' mejora la seguridad contra ataques autom√°ticos." },
        { q: "Seg√∫n el RGPD, ¬øc√≥mo debe estar el checkbox de privacidad en un formulario?", o: ["Marcado por defecto", "Desmarcado obligatoriamente (acci√≥n manual)", "Oculto", "No hace falta"], a: 1, e: "El usuario debe aceptar expl√≠citamente la pol√≠tica." },
        { q: "¬øCu√°l es la 'Regla de Oro' sobre el peso de las im√°genes?", o: ["Menos de 2 MB", "Menos de 500 KB", "Menos de 200 KB aprox", "No importa"], a: 2, e: "Para mantener la web r√°pida." },
        { q: "¬øQu√© es 'Squoosh'?", o: ["Un refresco", "Una herramienta de Google para comprimir im√°genes antes de subirlas", "Un plugin", "Un tema"], a: 1, e: "Recomendada en clase para optimizaci√≥n manual." },
        { q: "¬øQu√© formato de imagen moderno pesa menos y tiene buena calidad?", o: ["BMP", "TIFF", "WebP", "GIF"], a: 2, e: "El est√°ndar actual para web." },
        { q: "¬øQu√© plugin usamos para copias de seguridad y migraciones?", o: ["All-in-One WP Migration o Duplicator", "Yoast", "Elementor", "WooCommerce"], a: 0, e: "Empaqueta toda la web en un archivo para moverla." },

        // --- BLOQUE 5: PLUGINS ESENCIALES Y CONCEPTOS ---
        { q: "¬øPara qu√© sirve el plugin 'Contact Form 7'?", o: ["Para crear formularios de contacto", "Para SEO", "Para tiendas", "Para seguridad"], a: 0, e: "Un cl√°sico para gestionar correos desde la web." },
        { q: "¬øPara qu√© sirve 'Yoast SEO' o 'RankMath'?", o: ["Para dise√±ar", "Para ayudar a optimizar el contenido para Google (sem√°foros, metadatos)", "Para vender", "Para copias de seguridad"], a: 1, e: "Te gu√≠a para poner t√≠tulos y descripciones que gusten a Google." },
        { q: "¬øQu√© hace un plugin de Cach√© (como WP Rocket o W3 Total Cache)?", o: ["Borra archivos", "Guarda versiones est√°ticas de la web para que cargue mucho m√°s r√°pido", "Hackea la web", "Traduce"], a: 1, e: "Imprescindible para la velocidad (WPO)." },
        { q: "¬øQu√© es 'Wordfence'?", o: ["Un muro de palabras", "Un plugin de seguridad (Firewall, esc√°ner de virus)", "Un editor", "Un tema"], a: 1, e: "Protege la web de ataques." },
        { q: "¬øQu√© es 'Loco Translate'?", o: ["Un traductor autom√°tico", "Un plugin para traducir textos internos de temas y plugins (cadenas de texto)", "Un mapa", "Un error"], a: 1, e: "Permite cambiar 'Read More' por 'Leer m√°s'." },
        { q: "¬øQu√© es un 'Shortcode'?", o: ["Un c√≥digo corto entre corchetes [ ] que muestra una funci√≥n (ej: un formulario)", "Un error", "Una contrase√±a", "Un enlace"], a: 0, e: "Forma cl√°sica de insertar elementos din√°micos en WordPress." },
        { q: "¬øQu√© es el 'Lazy Load'?", o: ["Carga lenta", "Carga diferida: las im√°genes solo cargan cuando bajas haciendo scroll", "Un virus", "Un error"], a: 1, e: "Mejora la velocidad inicial de carga." },
        { q: "¬øQu√© es un CPT (Custom Post Type)?", o: ["Un post normal", "Un tipo de contenido personalizado (ej: Proyectos, Inmuebles, Recetas)", "Un plugin", "Un usuario"], a: 1, e: "Se usa cuando las Entradas y P√°ginas no son suficientes." },
        { q: "¬øQu√© es el archivo 'robots.txt'?", o: ["Un virus", "Un archivo que dice a Google qu√© partes de la web puede rastrear y cu√°les no", "Un mapa", "Un estilo"], a: 1, e: "Controla el acceso de los bots." },
        { q: "¬øQu√© es un error 404?", o: ["P√°gina no encontrada", "Servidor ca√≠do", "√âxito", "Pago aceptado"], a: 0, e: "El enlace est√° roto o la p√°gina ya no existe." },

        // --- BLOQUE 6: PREGUNTAS GENERALES DE REPASO ---
        { q: "¬øQu√© significa CMS?", o: ["C√≥digo Muy Seguro", "Content Management System (Gestor de Contenidos)", "Cliente Muy Satisfecho", "Computer System"], a: 1, e: "WordPress es el CMS m√°s usado del mundo." },
        { q: "¬øQu√© es el 'Frontend'?", o: ["El panel de control", "La parte visible de la web que ven los usuarios", "La base de datos", "El servidor"], a: 1, e: "La cara p√∫blica de tu sitio." },
        { q: "¬øQu√© es el 'Backend'?", o: ["La parte visible", "El panel de administraci√≥n (wp-admin) donde trabajas t√∫", "El dise√±o", "El usuario"], a: 1, e: "La trastienda de tu sitio." },
        { q: "¬øQu√© es una 'Landing Page'?", o: ["P√°gina de aterrizaje dise√±ada para convertir (vender o captar datos)", "La home", "El blog", "P√°gina de error"], a: 0, e: "Suelen no tener men√∫ para no distraer." },
        { q: "¬øQu√© es un CTA (Call To Action)?", o: ["Centro T√©cnico", "Llamada a la Acci√≥n (Bot√≥n de 'Comprar', 'Contactar')", "Un impuesto", "Un error"], a: 1, e: "El elemento que pide al usuario que haga algo." },
        { q: "¬øQu√© es el Favicon?", o: ["El logo grande", "El icono peque√±ito que sale en la pesta√±a del navegador", "El pie de p√°gina", "Un men√∫"], a: 1, e: "Parte de la identidad de marca." },
        { q: "¬øQu√© es un 'Tema Hijo' (Child Theme)?", o: ["Un tema peque√±o", "Una copia del tema principal que permite modificar c√≥digo sin perderlo al actualizar", "Un plugin", "Un widget"], a: 1, e: "Obligatorio si vas a tocar c√≥digo PHP o CSS del tema." },
        { q: "¬øQu√© significa que una web sea 'Responsive'?", o: ["Que responde r√°pido", "Que se adapta bien a m√≥viles, tablets y ordenadores", "Que es cara", "Que es segura"], a: 1, e: "Hoy en d√≠a es obligatorio por Google (Mobile First)." },
        { q: "¬øQu√© es el texto 'Alt' (Alternativo) de una imagen?", o: ["El t√≠tulo", "Descripci√≥n para ciegos y para Google (SEO)", "El borde", "El pie de foto"], a: 1, e: "Si no carga la imagen, se lee este texto." },
        { q: "¬øQu√© es HTTPS?", o: ["Protocolo seguro (el candadito)", "Web lenta", "Web antigua", "Un dominio"], a: 0, e: "Encripta los datos entre el usuario y la web." },

        // --- BLOQUE 7: DETALLES DE EXAMEN (M√°s simples) ---
        { q: "Si la web se queda en blanco (Pantalla Blanca de la Muerte), ¬øqu√© suele ser?", o: ["Se rompi√≥ el monitor", "Error de PHP, normalmente por un plugin incompatible o falta de memoria", "Virus", "Internet lento"], a: 1, e: "Suele arreglarse desactivando plugins desde el hosting." },
        { q: "¬øQu√© documento legal es obligatorio en el pie de p√°gina?", o: ["Pol√≠tica de Privacidad", "El curr√≠culum", "Instagram", "Nada"], a: 0, e: "Requisito legal." },
        { q: "¬øQu√© es un 'Mockup'?", o: ["Un dise√±o visual est√°tico de c√≥mo quedar√° la web antes de programarla", "Una copia de seguridad", "Un virus", "Un c√≥digo"], a: 0, e: "Fase de dise√±o previo." },
        { q: "¬øQu√© es el 'Hosting'?", o: ["El dominio", "El espacio en un servidor donde se guardan tus archivos web", "El dise√±o", "El navegador"], a: 1, e: "Es la 'casa' de tu web." },
        { q: "¬øQu√© es el 'Dominio'?", o: ["El hosting", "El nombre de tu web (ej: google.com)", "El dise√±o", "El c√≥digo"], a: 1, e: "Es la 'direcci√≥n' de tu casa." },
        { q: "¬øQu√© es un iframe?", o: ["Una ventana para incrustar contenido de otra web (ej: Google Maps o YouTube)", "Una imagen", "Un plugin", "Un error"], a: 0, e: "Forma est√°ndar de embeber contenido externo." },
        { q: "¬øQu√© es CSS?", o: ["Lenguaje de Estilos (colores, tama√±os, dise√±o)", "Base de datos", "Contenido", "Funcionalidad"], a: 0, e: "HTML es el esqueleto, CSS es la ropa." },
        { q: "Si cambias de tema en WordPress, ¬øpierdes tus Entradas y P√°ginas?", o: ["S√≠, se borra todo", "No, el contenido se mantiene, solo cambia el dise√±o", "Solo se borran las fotos", "Depende del d√≠a"], a: 1, e: "El contenido est√° en la base de datos, el tema solo lo 'pinta'." },
        { q: "¬øQu√© es 'Gutenberg'?", o: ["Un libro", "El editor de bloques moderno de WordPress", "Un plugin", "Un tema"], a: 1, e: "El sistema nativo para escribir posts." },
        { q: "Si no puedes subir una foto porque pesa mucho, ¬øqu√© falla?", o: ["Tu internet", "El l√≠mite de subida del servidor (upload_max_filesize)", "WordPress est√° roto", "El color"], a: 1, e: "A veces hay que pedir al hosting que suba ese l√≠mite." }
    ];

    // VARIABLES DE ESTADO
    let questions = []; // Las 50 seleccionadas
    let userAnswers = {};
    let timer;
    let timeLeft = 45 * 60; // 45 min
    let isPaused = false;

    // INICIALIZACI√ìN
    function init() {
        // 1. Barajar y coger 50
        questions = DB.sort(() => 0.5 - Math.random()).slice(0, 50);
        
        // 2. Renderizar
        const container = document.getElementById('quiz-container');
        container.innerHTML = ""; // Limpiar
        
        questions.forEach((q, index) => {
            // Crear HTML de la pregunta
            let html = `
                <div class="card" id="card-${index}">
                    <div class="q-text">${index + 1}. ${q.q}</div>
                    <div class="options-group">
            `;
            
            let indices = q.o.map((_, i) => i); // [0, 1, 2, 3]
            // indices.sort(() => 0.5 - Math.random()); // Descomentar para barajar opciones

            indices.forEach(i => {
                html += `
                    <label class="option-label" id="lbl-${index}-${i}">
                        <input type="radio" name="q_${index}" value="${i}">
                        ${q.o[i]}
                    </label>
                `;
            });

            html += `
                    </div>
                    <button class="check-btn" onclick="check(${index})">Comprobar</button>
                    <div class="explanation-box" id="exp-${index}"></div>
                </div>
            `;
            container.innerHTML += html;
        });

        // 3. Iniciar Timer
        startTimer();
    }

    // --- L√ìGICA DE CORRECCI√ìN H√çBRIDA ---

    // 1. Funci√≥n para comprobar UNA pregunta individual (Bot√≥n azul)
    window.check = function(index) {
        const selected = document.querySelector(`input[name="q_${index}"]:checked`);
        if (!selected) return alert("Por favor, selecciona una opci√≥n antes de comprobar.");

        const val = parseInt(selected.value);
        const correct = questions[index].a;
        
        const card = document.getElementById(`card-${index}`);
        const btn = card.querySelector('.check-btn');
        const expBox = document.getElementById(`exp-${index}`);
        
        // Guardar
        userAnswers[index] = (val === correct);

        // Bloquear
        const inputs = card.querySelectorAll('input');
        inputs.forEach(inp => inp.disabled = true);
        btn.disabled = true;
        btn.textContent = "Revisado";
        btn.style.background = "#a7aaad";

        // Feedback
        if (val === correct) {
            document.getElementById(`lbl-${index}-${val}`).classList.add('correct');
            expBox.innerHTML = `<strong>‚úÖ ¬°CORRECTO!</strong><br>${questions[index].e}`;
            expBox.style.borderLeftColor = "#00a32a";
        } else {
            document.getElementById(`lbl-${index}-${val}`).classList.add('wrong');
            document.getElementById(`lbl-${index}-${correct}`).classList.add('correct');
            expBox.innerHTML = `<strong>‚ùå INCORRECTO.</strong><br>La correcta es la marcada en verde.<br><em>${questions[index].e}</em>`;
            expBox.style.borderLeftColor = "#d63638";
        }
        expBox.style.display = "block";
    };

    // 2. Funci√≥n FINAL (Bot√≥n rojo flotante) - CORRIGE TODO LO PENDIENTE
    window.finishExam = function() {
        clearInterval(timer);

        questions.forEach((q, index) => {
            // Si ya se corrigi√≥ individualmente, saltar
            if (userAnswers.hasOwnProperty(index)) return;

            const selected = document.querySelector(`input[name="q_${index}"]:checked`);
            
            if (selected) {
                const val = parseInt(selected.value);
                userAnswers[index] = (val === q.a);
                
                if (val !== q.a) {
                    document.getElementById(`lbl-${index}-${val}`).classList.add('wrong');
                }
                document.getElementById(`lbl-${index}-${q.a}`).classList.add('correct');
            } else {
                userAnswers[index] = false; // Fallo por no responder
                document.getElementById(`lbl-${index}-${q.a}`).classList.add('correct'); // Mostrar cu√°l era
            }
            
            // Bloquear visualmente
            const card = document.getElementById(`card-${index}`);
            const inputs = card.querySelectorAll('input');
            const btn = card.querySelector('.check-btn');
            inputs.forEach(inp => inp.disabled = true);
            if(btn) btn.disabled = true;
        });

        // Calcular Nota
        const totalAciertos = Object.values(userAnswers).filter(r => r === true).length;
        const totalPreguntas = questions.length;
        const notaFinal = (totalAciertos / totalPreguntas) * 10;

        // Mostrar
        document.getElementById('score-display').innerText = notaFinal.toFixed(1);
        document.getElementById('res-correct').innerText = totalAciertos;
        document.getElementById('res-wrong').innerText = totalPreguntas - totalAciertos;
        
        const msg = document.getElementById('score-msg');
        if (notaFinal >= 5) {
            msg.innerHTML = "<strong style='color:#00a32a'>¬°ENHORABUENA, HAS APROBADO! üéâ</strong>";
        } else {
            msg.innerHTML = "<strong style='color:#d63638'>HAS SUSPENDIDO. NECESITAS REPASAR. üìö</strong>";
        }

        document.getElementById('result-modal').style.display = 'flex';
    };

    // TIMER
    function startTimer() {
        timer = setInterval(() => {
            if(!isPaused) {
                timeLeft--;
                let m = Math.floor(timeLeft / 60);
                let s = timeLeft % 60;
                document.getElementById('timer').innerText = `${m}:${s < 10 ? '0'+s : s}`;
                if(timeLeft <= 0) finishExam();
            }
        }, 1000);
    }

    window.togglePause = function() {
        isPaused = !isPaused;
        document.getElementById('pause-modal').style.display = isPaused ? 'flex' : 'none';
    };

    init();

</script>
</body>
</html>